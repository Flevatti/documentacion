"use strict";(self.webpackChunkdocumentacion=self.webpackChunkdocumentacion||[]).push([[4513],{5680:(e,a,o)=>{o.d(a,{xA:()=>d,yg:()=>v});var n=o(6540);function r(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}function i(e,a){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),o.push.apply(o,n)}return o}function s(e){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?i(Object(o),!0).forEach((function(a){r(e,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))}))}return e}function c(e,a){if(null==e)return{};var o,n,r=function(e,a){if(null==e)return{};var o,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)o=i[n],a.indexOf(o)>=0||(r[o]=e[o]);return r}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)o=i[n],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=n.createContext({}),t=function(e){var a=n.useContext(l),o=a;return e&&(o="function"==typeof e?e(a):s(s({},a),e)),o},d=function(e){var a=t(e.components);return n.createElement(l.Provider,{value:a},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},m=n.forwardRef((function(e,a){var o=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),u=t(o),m=r,v=u["".concat(l,".").concat(m)]||u[m]||p[m]||i;return o?n.createElement(v,s(s({ref:a},d),{},{components:o})):n.createElement(v,s({ref:a},d))}));function v(e,a){var o=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var i=o.length,s=new Array(i);s[0]=m;var c={};for(var l in a)hasOwnProperty.call(a,l)&&(c[l]=a[l]);c.originalType=e,c[u]="string"==typeof e?e:r,s[1]=c;for(var t=2;t<i;t++)s[t]=o[t];return n.createElement.apply(null,s)}return n.createElement.apply(null,o)}m.displayName="MDXCreateElement"},891:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>t});var n=o(8168),r=(o(6540),o(5680));const i={sidebar_position:3},s="Docker compose",c={unversionedId:"Docker/archivoDockerCompose",id:"Docker/archivoDockerCompose",title:"Docker compose",description:"- Te simplifica el proceso de crear contenedores, conectarlos en una red y configurar como almacenar los datos cuando los contenedores se pierdan.",source:"@site/docs/Docker/archivoDockerCompose.md",sourceDirName:"Docker",slug:"/Docker/archivoDockerCompose",permalink:"/documentacion/docs/Docker/archivoDockerCompose",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Docker/archivoDockerCompose.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"Docker",previous:{title:"DockerFile",permalink:"/documentacion/docs/Docker/archivoDockerFile"}},l={},t=[{value:"Campo version",id:"campo-version",level:2},{value:"Campo services",id:"campo-services",level:2},{value:"image",id:"image",level:3},{value:"environment",id:"environment",level:3},{value:"ports",id:"ports",level:3},{value:"build",id:"build",level:3},{value:"depends_on",id:"depends_on",level:3},{value:"links",id:"links",level:3},{value:"env_file",id:"env_file",level:3},{value:"Volumes",id:"volumes",level:2},{value:"Ejecutar docker compose",id:"ejecutar-docker-compose",level:2}],d={toc:t},u="wrapper";function p(e){let{components:a,...o}=e;return(0,r.yg)(u,(0,n.A)({},d,o,{components:a,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"docker-compose"},"Docker compose"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Te simplifica el proceso de crear contenedores, conectarlos en una red y configurar como almacenar los datos cuando los contenedores se pierdan."),(0,r.yg)("li",{parentName:"ul"},"Es una herramienta que viene integrada con dockers desktop."),(0,r.yg)("li",{parentName:"ul"},"Es  un archivo que se llama docker-compose.yml o docker-composer.yaml")),(0,r.yg)("h2",{id:"campo-version"},"Campo version"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Esta obsoleta, pero la puedes encontrar en ciertos archivos de configuraci\xf3n o especificaciones, se incluy\xf3 originalmente para indicar la versi\xf3n de la sintaxis y mantener la compatibilidad con versiones anteriores de un software o sistema. "),(0,r.yg)("li",{parentName:"ul"},"B\xe1sicamente, se usaba para asegurarse de que el sistema pudiera funcionar con configuraciones antiguas. A partir de Docker Compose v3.9 y versiones posteriores, Docker ha dejado de requerir la propiedad version en los archivos docker-compose.yml. "),(0,r.yg)("li",{parentName:"ul"},"En lugar de requerir una declaraci\xf3n expl\xedcita de la versi\xf3n, Docker Compose ahora puede detectar autom\xe1ticamente la \u201cversi\xf3n de sintaxis\u201dy manejar las diferencias de sintaxis y caracter\xedsticas entre versiones. "),(0,r.yg)("li",{parentName:"ul"},"Esto significa que puedes omitir la propiedad version en tus archivos docker-compose.yml, y Docker Compose aplicar\xe1 las reglas y comportamientos adecuados en funci\xf3n de las caracter\xedsticas y sintaxis presentes en el archivo.")),(0,r.yg)("h2",{id:"campo-services"},"Campo services"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Especifica los m\xfaltiples contenedores que se van a usar."),(0,r.yg)("li",{parentName:"ul"},"Cada contenedor tiene un nombre (puede ser cualquiera) y le podemos especificar varios campos.")),(0,r.yg)("h3",{id:"image"},"image"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Que imagen va a usar.")),(0,r.yg)("h3",{id:"environment"},"environment"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Sirve para especificar las variables de entorno.")),(0,r.yg)("h3",{id:"ports"},"ports"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Especifica que puertos se van a mapear.")),(0,r.yg)("h3",{id:"build"},"build"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"En lugar de usar el campo image, podes usar este campo para especificar en donde esta el archivo dockerfile. De esta manera pod\xe9s crear una imagen \u201cpersonalizada\u201d de tu aplicaci\xf3n y ejecutarla en un contenedor.")),(0,r.yg)("h3",{id:"depends_on"},"depends_on"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Especifica las dependencias del contenedor, de esta manera nos aseguramos que los servicios (contenedores) est\xe9n disponibles antes que este contenedor se inicie. "),(0,r.yg)("li",{parentName:"ul"},"En resumen, sirve para controlar el orden de inicio de los controladores, pero no garantiza que los servicios est\xe9n completamente listo. Para garantizar que esta listo podes usar el comando wait de docker como wait-for-it.sh O  dockerize.")),(0,r.yg)("h3",{id:"links"},"links"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Se utiliza para definir enlaces entre contenedores, permitiendo que un contenedor se conecte a otro utilizando un \u201clink\u201d que usa el DNS interno de Docker."),(0,r.yg)("li",{parentName:"ul"},"Sin embargo, es importante notar que links est\xe1 considerado en desuso (deprecated) en las versiones m\xe1s recientes de Docker Compose, ya que Docker Compose ahora usa una red predeterminada donde todos los contenedores pueden comunicarse entre s\xed por el nombre de servicio.")),(0,r.yg)("h3",{id:"env_file"},"env_file"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Sirve para especificar el archivo con las variables de entorno (.env) que se va a usar en el contenedor. Sirve para especificar uno o varios archivos que contienen variables de entorno. Estas variables se pasan al contenedor durante su ejecuci\xf3n."),(0,r.yg)("li",{parentName:"ul"},"La aplicaci\xf3n y por ende la imagen usaran las variables de entorno que hay en el proyecto. Docker Compose autom\xe1ticamente carga las variables de entorno desde un archivo .env ubicado en el mismo directorio que el archivo docker-compose.yml. Por lo tanto no es necesario el campo .env_file."),(0,r.yg)("li",{parentName:"ul"},"Aunque no es necesario especificar env_file si est\xe1s utilizando un archivo .env en el mismo directorio, hay casos en los que podr\xeda ser \xfatil. Por ejemplo, si deseas utilizar m\xfaltiples archivos de variables de entorno o tener m\xe1s control sobre qu\xe9 variables se cargan para cada servicio espec\xedfico.")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"El uso de un archivo .env en Docker Compose permite definir variables de entorno que se pueden usar dentro del archivo docker-compose.yml utilizando la sintaxis de interpolaci\xf3n: ${NOMBRE_VARIABLE}. Sin embargo, la utilizaci\xf3n del campo env_file dentro de un servicio en docker-compose.yml tiene una funcionalidad ligeramente diferente y no permite el uso directo de las variables de entorno definidas en ese campo en el archivo docker-compose.yml.")))),(0,r.yg)("h2",{id:"volumes"},"Volumes"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Falta informaci\xf3n...")),(0,r.yg)("h2",{id:"ejecutar-docker-compose"},"Ejecutar docker compose"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"En la ubicaci\xf3n del proyecto y del archivo docker-composer , ejecutamos el comando:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-powershell"},"docker compose up\n")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observaci\xf3n")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Lee el archivo docker-composer y crea o ejecuta las im\xe1genes/contenedores necesarios para realizar todo lo que se especifica en el archivo."),(0,r.yg)("li",{parentName:"ul"},"Todos los contenedores que crea y ejecuta los agrupa en un nombre."),(0,r.yg)("li",{parentName:"ul"},'Al ejecutar el comando se bloquea la consola, por lo tanto, si pulsamos "control + c" se detiene. Para evitar esto puedes usar la ',(0,r.yg)("a",{parentName:"li",href:"/documentacion/docs/Docker/#comportamiento-de-la-consola"},"opci\xf3n -d del comando docker run"),".")))),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Para eliminar el grupo que contiene todos los contenedores que creamos:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-powershell"},"docker compose down\n")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Tambien podemos usar la opcion --build  para arrancar los servicios definidos en un archivo docker-compose.yml. La opci\xf3n --build a\xf1ade un paso adicional: fuerza la construcci\xf3n de las im\xe1genes de los servicios antes de arrancarlos. Esto es \xfatil cuando has realizado cambios en los Dockerfiles o en el contexto de construcci\xf3n y necesitas que se reflejen esos cambios en las im\xe1genes."),(0,r.yg)("li",{parentName:"ul"},"Sin --build: Docker Compose usa las im\xe1genes que ya est\xe1n disponibles (ya sea locales o en un registro) y solo las construye si no existen."),(0,r.yg)("li",{parentName:"ul"},"Con --build: Fuerza la construcci\xf3n de las im\xe1genes para todos los servicios, asegurando que cualquier cambio reciente en el Dockerfile o en el contexto de construcci\xf3n se aplique."),(0,r.yg)("li",{parentName:"ul"},"Ejemplo:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-powershell"},"docker compose up  --build\n")))}p.isMDXComponent=!0}}]);