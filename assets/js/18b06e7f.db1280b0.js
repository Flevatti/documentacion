"use strict";(self.webpackChunkdocumentacion=self.webpackChunkdocumentacion||[]).push([[1222],{5680:(e,n,a)=>{a.d(n,{xA:()=>p,yg:()=>g});var o=a(6540);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function t(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,o)}return a}function s(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?t(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function i(e,n){if(null==e)return{};var a,o,r=function(e,n){if(null==e)return{};var a,o,r={},t=Object.keys(e);for(o=0;o<t.length;o++)a=t[o],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(o=0;o<t.length;o++)a=t[o],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=o.createContext({}),c=function(e){var n=o.useContext(l),a=n;return e&&(a="function"==typeof e?e(n):s(s({},n),e)),a},p=function(e){var n=c(e.components);return o.createElement(l.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},m=o.forwardRef((function(e,n){var a=e.components,r=e.mdxType,t=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(a),m=r,g=u["".concat(l,".").concat(m)]||u[m]||d[m]||t;return a?o.createElement(g,s(s({ref:n},p),{},{components:a})):o.createElement(g,s({ref:n},p))}));function g(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var t=a.length,s=new Array(t);s[0]=m;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i[u]="string"==typeof e?e:r,s[1]=i;for(var c=2;c<t;c++)s[c]=a[c];return o.createElement.apply(null,s)}return o.createElement.apply(null,a)}m.displayName="MDXCreateElement"},1206:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>t,metadata:()=>i,toc:()=>c});var o=a(8168),r=(a(6540),a(5680));const t={sidebar_position:10},s="Proyecto 2 -- ShortUrl",i={unversionedId:"vue/proyecto2",id:"vue/proyecto2",title:"Proyecto 2 -- ShortUrl",description:"API a consumir",source:"@site/docs/vue/proyecto2.md",sourceDirName:"vue",slug:"/vue/proyecto2",permalink:"/documentacion/docs/vue/proyecto2",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/vue/proyecto2.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_position:10},sidebar:"vue",previous:{title:"Proyecto #1",permalink:"/documentacion/docs/vue/proyecto"}},l={},c=[{value:"API a consumir",id:"api-a-consumir",level:2},{value:"Quasar",id:"quasar",level:2},{value:"Axios / Obtenemos el token del login",id:"axios--obtenemos-el-token-del-login",level:2},{value:"Utilizamos el axios de quasar",id:"utilizamos-el-axios-de-quasar",level:3},{value:"Refrescar el token",id:"refrescar-el-token",level:2},{value:"Enviar el token para crear un link / Axios V2",id:"enviar-el-token-para-crear-un-link--axios-v2",level:2},{value:"Refrescar el token cada 15 minuto",id:"refrescar-el-token-cada-15-minuto",level:2},{value:"Pagina protegida / Layout",id:"pagina-protegida--layout",level:2},{value:"Pagina &quot;protegida&quot;",id:"pagina-protegida",level:3},{value:"Configuracion de rutas",id:"configuracion-de-rutas",level:3},{value:"Pinia",id:"pinia",level:2},{value:"Vamos a crear una tienda que trabaje con la Composition Api",id:"vamos-a-crear-una-tienda-que-trabaje-con-la-composition-api",level:4},{value:"Le a\xf1adimos  m\xe9todos a la Store",id:"le-a\xf1adimos--m\xe9todos-a-la-store",level:3},{value:"Cerrar sesion",id:"cerrar-sesion",level:2},{value:"Ruta Protegida",id:"ruta-protegida",level:2},{value:"Metodo beforeEach",id:"metodo-beforeeach",level:3},{value:"Una url con meta:",id:"una-url-con-meta",level:4},{value:"Configuramos la ruta protegida",id:"configuramos-la-ruta-protegida",level:3},{value:"Redireccionamos los botones de Iniciar sesion y cerrar sesion",id:"redireccionamos-los-botones-de-iniciar-sesion-y-cerrar-sesion",level:4},{value:"A\xf1adimos persistencia de la sesion del  usuario",id:"a\xf1adimos-persistencia-de-la-sesion-del--usuario",level:2},{value:"Abreviacion",id:"abreviacion",level:4},{value:"Login",id:"login",level:2},{value:"Validaciones",id:"validaciones",level:3},{value:"Validaciones de la API (Codigo de respuesta diferente a 2xx)",id:"validaciones-de-la-api-codigo-de-respuesta-diferente-a-2xx",level:3},{value:"Empezamos a trabajar en el catch de la funci\xf3n access:",id:"empezamos-a-trabajar-en-el-catch-de-la-funci\xf3n-access",level:4},{value:"Empezamos a trabajar con el dialogo.",id:"empezamos-a-trabajar-con-el-dialogo",level:3},{value:"Empezamos",id:"empezamos",level:4},{value:"Register",id:"register",level:2},{value:"Crear Link",id:"crear-link",level:2},{value:"Obtener links",id:"obtener-links",level:2},{value:"Componente -- Formulario agregar Link / Notify",id:"componente----formulario-agregar-link--notify",level:2},{value:"Composable Y Loading",id:"composable-y-loading",level:2},{value:"Loading",id:"loading",level:3},{value:"A\xf1adimos los mensajes de errores en las notificaciones",id:"a\xf1adimos-los-mensajes-de-errores-en-las-notificaciones",level:4},{value:"Mostrar las url en componentes / Props",id:"mostrar-las-url-en-componentes--props",level:2},{value:"Eliminar",id:"eliminar",level:2},{value:"Resetear valores de addLink",id:"resetear-valores-de-addlink",level:2},{value:"Editar",id:"editar",level:2},{value:"notifyHook v2",id:"notifyhook-v2",level:2},{value:"Plugin Quasar Loading",id:"plugin-quasar-loading",level:2},{value:"Funcion copy",id:"funcion-copy",level:2},{value:"Variable de entorno en quasar",id:"variable-de-entorno-en-quasar",level:2},{value:"Utilizamos las variables de entorno",id:"utilizamos-las-variables-de-entorno",level:4},{value:"Detectar si esta en desarrollo",id:"detectar-si-esta-en-desarrollo",level:3},{value:"Redireccionamiento",id:"redireccionamiento",level:2},{value:"Metodo beforeEnter",id:"metodo-beforeenter",level:3},{value:"Reset Validation",id:"reset-validation",level:2},{value:"Producci\xf3n",id:"producci\xf3n",level:2},{value:"Backend",id:"backend",level:3},{value:"Frontend",id:"frontend",level:3},{value:"Deploy backend",id:"deploy-backend",level:3},{value:"Deploy Frontend",id:"deploy-frontend",level:3},{value:"Vamos a usar Netlify",id:"vamos-a-usar-netlify",level:4},{value:"Error de Vue Router y Configuramos las variables de entorno",id:"error-de-vue-router-y-configuramos-las-variables-de-entorno",level:3},{value:"Solucion:",id:"solucion",level:4},{value:"Configuramos las variables de entorno",id:"configuramos-las-variables-de-entorno",level:4},{value:"Luego de solucionar el problema y configurar el quasar.config , volvemos a hacer el deploy",id:"luego-de-solucionar-el-problema-y-configurar-el-quasarconfig--volvemos-a-hacer-el-deploy",level:4},{value:"Error persistencia de datos",id:"error-persistencia-de-datos",level:3},{value:"Luego de solucionar el problema y configurar el quasar.config , volvemos a hacer el deploy",id:"luego-de-solucionar-el-problema-y-configurar-el-quasarconfig--volvemos-a-hacer-el-deploy-1",level:4}],p={toc:c},u="wrapper";function d(e){let{components:n,...a}=e;return(0,r.yg)(u,(0,o.A)({},p,a,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"proyecto-2----shorturl"},"Proyecto 2 -- ShortUrl"),(0,r.yg)("h2",{id:"api-a-consumir"},"API a consumir"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://fedeleva.github.io/aprendizaje/Node/apiRest.html"},"Guia de la Api -- 1")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://fedeleva.github.io/documentacion/docs/Node/apiRest"},"Guia de la Api -- 2"))),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Clonamos el repositorio que contiene la Api"),(0,r.yg)("li",{parentName:"ol"},"Ejecutamos el comando npm install"),(0,r.yg)("li",{parentName:"ol"},"Configuramos las variables de entorno\n.env")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"URI_MONGO=XXX\nJWT_SECRET=nWMUUa\nJWT_REFRESH=aJCPfy\nMODO=developer\nORIGIN1=\n")),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Configuramos los cors de la API ")),(0,r.yg)("p",null,".env  "),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"ORIGIN1=http://localhost:9000\n")),(0,r.yg)("ol",{start:5},(0,r.yg)("li",{parentName:"ol"},"Habilitamos las credenciales ")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Sirve para que el origin (quien realizo la petici\xf3n) pueda recibir cookies como respuesta.")),(0,r.yg)("p",null,"index.js "),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'// Habilitamos y configuramos los cors.\n//cors({configuracion})\napp.use(cors({\n    origin: function (origin, callback) {\n        // Si el dominio esta autorizado\n        if (whiteList.includes(origin)) {\n            return callback(null, origin);\n        }\n        return callback("Error de CORS origin " + origin + "No autorizado!");\n    },\n    credentials: true,\n\n}))\n\n')),(0,r.yg)("h2",{id:"quasar"},"Quasar"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Es un framework de c\xf3digo abierto basado en Vue.js para crear aplicaciones, con una sola base de c\xf3digo, para implementar en la web como SPA, PWA, SSR, en una aplicaci\xf3n m\xf3vil, usando Cordova para iOS y Android, y en un Aplicaci\xf3n de escritorio, utilizando Electron para Mac, Windows y Linux.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"El lema de Quasar es: escribir el c\xf3digo una vez y desplegarlo simult\xe1neamente como un sitio web, una aplicaci\xf3n m\xf3vil y/o una aplicaci\xf3n Electron. S\xed, una base de c\xf3digo para todos ellos, que lo ayuda a desarrollar una aplicaci\xf3n en un tiempo r\xe9cord mediante el uso de una CLI de \xfaltima generaci\xf3n y el respaldo de las mejores pr\xe1cticas, los componentes web ultrarr\xe1pidos de Quasar.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("a",{parentName:"p",href:"https://quasar.dev/start/quasar-cli"}," CLI de quasar")))),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"En una carpeta ejecutamos ")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-powershell"},"npm init quasar\n")),(0,r.yg)("p",null,"Opciones: "),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"App with Quasar CLI \u2026"),(0,r.yg)("li",{parentName:"ol"},"Nombre de la carpeta (A su gusto)"),(0,r.yg)("li",{parentName:"ol"},"Quasar v2(\u2026)"),(0,r.yg)("li",{parentName:"ol"},"Javascript"),(0,r.yg)("li",{parentName:"ol"},"Quasar APP CLI with  Vite"),(0,r.yg)("li",{parentName:"ol"},"Nombre del proyecto (A su gusto)"),(0,r.yg)("li",{parentName:"ol"},"Por defecto"),(0,r.yg)("li",{parentName:"ol"},"Por defecto"),(0,r.yg)("li",{parentName:"ol"},"Por defecto"),(0,r.yg)("li",{parentName:"ol"},"Sass with SCSS Syntax"),(0,r.yg)("li",{parentName:"ol"},"Opciones a elegir (Seleccionas con el espacio  y enter para continuar)")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"State Management (Pinia)"),(0,r.yg)("li",{parentName:"ul"},"Axios"),(0,r.yg)("li",{parentName:"ul"},"ESLint")),(0,r.yg)("ol",{start:12},(0,r.yg)("li",{parentName:"ol"},"Prettier"),(0,r.yg)("li",{parentName:"ol"},"Yes , use npm")),(0,r.yg)("ol",{start:2},(0,r.yg)("li",{parentName:"ol"},"Usamos los siguientes comandos para ejecutar el servidor de desarollo")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-powershell"},"npm install -g @quasar/cli\nquasar dev\n\n")),(0,r.yg)("ol",{start:3},(0,r.yg)("li",{parentName:"ol"},"Configuramos los scripts ")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'  "scripts": {\n    "lint": "eslint --ext .js,.vue ./",\n    "format": "prettier --write \\"**/*.{js,vue,scss,html,md,json}\\" --ignore-path .gitignore",\n    "test": "echo \\"No test specified\\" && exit 0",\n    "dev" : "quasar dev",\n    "build" : "quasar build"\n  },\n\n')),(0,r.yg)("ol",{start:4},(0,r.yg)("li",{parentName:"ol"},"Configuramos para poner el modo createWebHistory(Sirve para quitar las rutas con #)")),(0,r.yg)("p",null,"quasar.config.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"}," build: {\n      target: {\n        browser: [ 'es2019', 'edge88', 'firefox78', 'chrome87', 'safari13.1' ],\n        node: 'node16'\n      },\n\n      vueRouterMode: 'history', // available values: 'hash', 'history'\n\n")),(0,r.yg)("ol",{start:5},(0,r.yg)("li",{parentName:"ol"},"Habilitamos los iconos ")),(0,r.yg)("p",null,"quasar.config.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"    extras: [\n      // 'ionicons-v4',\n      'mdi-v5',\n      // 'fontawesome-v6',\n      // 'eva-icons',\n      // 'themify',\n      // 'line-awesome',\n      // 'roboto-font-latin-ext', // this or either 'roboto-font', NEVER both!\n\n      'roboto-font', // optional, you are not bound to it\n      'material-icons', // optional, you are not bound to it\n    ],\n\n")),(0,r.yg)("ol",{start:6},(0,r.yg)("li",{parentName:"ol"},"Configuramos Axios")),(0,r.yg)("p",null,"quasar.config.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"}," boot: [\n      \n      'axios',\n    ],\n\n")),(0,r.yg)("p",null,"src/boot/axios.js"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Este archivo por defecto te genera una instancia llamada api."),(0,r.yg)("li",{parentName:"ul"},"Con dicha instancia podemos acceder a una url fija al realizar una peticion.")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"import { boot } from 'quasar/wrappers'\nimport axios from 'axios'\nconst api = axios.create({ baseURL: 'https://api.example.com' })\n\nexport default boot(({ app }) => {\n\n  app.config.globalProperties.$axios = axios\n  app.config.globalProperties.$api = api\n})\n\nexport { api }\n\n")),(0,r.yg)("ol",{start:7},(0,r.yg)("li",{parentName:"ol"},"Editamos la pagina principal ")),(0,r.yg)("p",null,"src/pages/IndexPage.vue "),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Contiene la imagen de http://localhost:9000/")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'<template>\n\x3c!-- A\xf1adimos padding --\x3e\n  <q-page padding >\n    \x3c!-- Componente q-btn (un button)--\x3e\n     <q-btn @click="access">Ingresar</q-btn>\n  </q-page>\n</template>\n\n<script setup>\n   const access = () => {\n    console.log("Me diste click");\n   }\n<\/script>\n\n')),(0,r.yg)("h2",{id:"axios--obtenemos-el-token-del-login"},"Axios / Obtenemos el token del login"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Realiza solicitudes HTTP"),(0,r.yg)("li",{parentName:"ul"},"El Fetch vive en el navegador (frontend)"),(0,r.yg)("li",{parentName:"ul"},"Axios trabaja en el backend  (Node.js)")),(0,r.yg)("p",null,"src/pages/IndexPage.vue "),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'<template>\n\x3c!-- A\xf1adimos padding --\x3e\n  <q-page padding >\n    \x3c!-- Componente q-btn (un button)--\x3e\n     <q-btn @click="access">Ingresar</q-btn>\n  </q-page>\n</template>\n\n<script setup>\nimport axios from \'axios\';\n\n   const access = () => {\n    console.log("Me diste click");\n    // axios.method(url , {datos que se van a mandar por el body (se convierte en json de forma automatica)})\n    // el method puede ser POST , DELETE , GET , ETC\n    // devuelve una promesa\n    axios.post(\'http://localhost:5000/api/login\' , {\n  email : "usuario@test.com" ,\n    password : "123456"\n})\n.then(res => {\n  // La propiedad data contiene la informacion que devuelve la API\n  console.log(res.data);\n})\n.catch(e => console.log(e));\n   }\n<\/script>\n\n')),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Tambien puede ser ")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const access = async () => {\n  try {\n    console.log("Me diste click");\n    // axios.method(url , {datos que se van a mandar por el body (se convierte en json de forma automatica)})\n    // el method puede ser POST , DELETE , GET , ETC\n    // devuelve una promesa\n    const res = await axios.post(\'http://localhost:5000/api/login\', {\n      email: "usuario@test.com",\n      password: "123456"\n    })\n    console.log(res.data);\n  } catch (e) {\n    console.log(e);\n  }\n\n}\n\n')),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observacion ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Se hace una peticion post a http://localhost:5000/api/login"),(0,r.yg)("li",{parentName:"ul"},"El body de la peticion contiene un json con el email y el password")))),(0,r.yg)("h3",{id:"utilizamos-el-axios-de-quasar"},"Utilizamos el axios de quasar"),(0,r.yg)("p",null,"src/boot/axios.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const api = axios.create({ baseURL: 'http://localhost:5000' })\n")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"la baseURL es la parte de la URL que siempre se repite en todas las peticiones.")),(0,r.yg)("p",null,"IndexPage.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'<script setup>\nimport { api } from \'src/boot/axios\';\n\nconst access = async () => {\n  try {\n    console.log("Me diste click");\n    // api.method(url , {datos que se van a mandar por el body (se convierte en json de forma automatica)})\n    // el method puede ser POST , DELETE , GET , ETC\n    // devuelve una promesa\n    const res = await api.post(\'/api/login\', {\n      email: "usuario@test.com",\n      password: "123456"\n    })\n    console.log(res.data);\n  } catch (e) {\n    console.log(e);\n  }\n\n}\n<\/script>\n\n')),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Usamos los ref ")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"\n<template>\n  \x3c!-- A\xf1adimos padding --\x3e\n  <q-page padding>\n    \x3c!-- Componente q-btn (un button)--\x3e\n    <q-btn @click=\"access\">Ingresar</q-btn>\n    {{ token }} -- {{ expiresIn }}\n  </q-page>\n</template>\n\n<script setup>\nimport { api } from 'src/boot/axios';\nimport { ref } from 'vue';\nconst token = ref('');\nconst expiresIn = ref('');\nconst access = async () => {\n\n  try {\n    console.log(\"Me diste click\");\n    // axios(url , {datos que se van a mandar por el body (se convierte en json de forma automatica)}\n    // devuelve una promesa\n    const res = await api.post('/api/login', {\n      email: \"usuario@test.com\",\n      password: \"123456\"\n    })\n    //Asignamos el valor \n    token.value = res.data.token\n    expiresIn.value = res.data.expiresIn;\n    console.log(res.data);\n  } catch (e) {\n    console.log(e);\n  }\n\n}\n<\/script>\n\n")),(0,r.yg)("h2",{id:"refrescar-el-token"},"Refrescar el token"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Configuramos Axios para poder guardar las cookies que crea la API en el navegador.")),(0,r.yg)("p",null,"axios.js "),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const api = axios.create({\n  baseURL: 'http://localhost:5000',\n  // withCredentials = Que reciba cookies\n  withCredentials: true,\n\n}\n\n)\n\n")),(0,r.yg)("p",null,"IndexPage.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"<script setup>\nimport { api } from 'src/boot/axios';\nimport { ref } from 'vue';\nconst token = ref('');\nconst expiresIn = ref('');\nconst access = async () => {\n\n  try {\n    console.log(\"Me diste click\");\n    // axios(url , {datos que se van a mandar por el body (se convierte en json de forma automatica)}\n    // devuelve una promesa\n    const res = await api.post('/api/login', {\n      email: \"usuario@test.com\",\n      password: \"123456\"\n    })\n    //Asignamos el valor \n    token.value = res.data.token\n    expiresIn.value = res.data.expiresIn;\n    console.log(res.data);\n  } catch (e) {\n    console.log(e);\n  }\n\n}\n\nconst refreshToken = async () => {\n  try {\n    const res = await api.get('/api/refresh');\n    console.log(res.data);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nrefreshToken();\n<\/script>\n\n")),(0,r.yg)("h2",{id:"enviar-el-token-para-crear-un-link--axios-v2"},"Enviar el token para crear un link / Axios V2"),(0,r.yg)("p",null,"IndexPage.vue "),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"<template>\n  \x3c!-- A\xf1adimos padding --\x3e\n  <q-page padding>\n    \x3c!-- Componente q-btn (un button)--\x3e\n    <q-btn @click=\"access\">Ingresar</q-btn>\n    <q-btn @click=\"createLink\">Crear un link</q-btn>\n    {{ token }} -- {{ expiresIn }}\n  </q-page>\n</template>\n\n<script setup>\nconst createLink = async () => {\n  try {\n    //axios({configuraciones})\n    const res = await api({\n      // Metodo de Peticion (GET , POST , ETC)\n      method: 'POST',\n      // URL \n      url: 'api/links',\n      // Cabecera de la peticion\n      headers: {\n        'Authorization': 'Bearer ' + token.value\n      },\n      // La informacion que se manda por el body \n      // Axios por atras lo convierte en JSON\n      data: {\n        longLink: 'https://fedeleva.github.io/documentacion/docs/Node/apiRest#crear'\n      }\n    })\n    console.log(res.data);\n  } catch (error) {\n    console.log(error)\n  }\n}\n<\/script>\n\n")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observacion ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Se hace una peticion post a http://localhost:5000/api/links"),(0,r.yg)("li",{parentName:"ul"},"El body de la peticion contiene un json con el longLink"),(0,r.yg)("li",{parentName:"ul"},"El header  de la peticion contiene el token")))),(0,r.yg)("h2",{id:"refrescar-el-token-cada-15-minuto"},"Refrescar el token cada 15 minuto"),(0,r.yg)("p",null,"IndexPage.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"<script setup>\nimport { api } from 'src/boot/axios';\nimport { ref } from 'vue';\nconst token = ref('');\nconst expiresIn = ref('');\nconst access = async () => {\n\n  try {\n    console.log(\"Me diste click\");\n    // axios(url , {datos que se van a mandar por el body (se convierte en json de forma automatica)}\n    // devuelve una promesa\n    const res = await api.post('/api/login', {\n      email: \"usuario@test.com\",\n      password: \"123456\"\n    })\n    //Asignamos el valor \n    token.value = res.data.token\n    expiresIn.value = res.data.expiresIn;\n    setTime();\n  } catch (e) {\n    console.log(e);\n  }\n\n}\n\nconst refreshToken = async () => {\n  try {\n    const res = await api.get('/api/refresh');\n    token.value = res.data.token\n    expiresIn.value = res.data.expiresIn;\n    setTime();\n  } catch (error) {\n    console.log(error);\n  }\n}\nrefreshToken();\nconst setTime = () => {\n  setTimeout(() => {\n    refreshToken()\n  }, expiresIn.value * 1000 - 6000)\n}\n\n\nconst createLink = async () => {\n  try {\n    //axios({configuraciones})\n    const res = await api({\n      // Metodo de Peticion (GET , POST , ETC)\n      method: 'POST',\n      // URL \n      url: 'api/links',\n      // Cabecera de la peticion\n      headers: {\n        'Authorization': 'Bearer ' + token.value\n      },\n      // La informacion que se manda por el body \n      // Axios por atras lo convierte en JSON\n      data: {\n        longLink: 'https://fedeleva.github.io/documentacion/docs/Node/apiRest#crear'\n      }\n    })\n    console.log(res.data);\n  } catch (error) {\n    console.log(error)\n  }\n}\n\n<\/script>\n\n")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observacion ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Se produce un bucle infinito con la funci\xf3n setTime."),(0,r.yg)("li",{parentName:"ul"},"La funci\xf3n setTime se ejecutar\xe1 6 segundos antes de que expire el token.")))),(0,r.yg)("h2",{id:"pagina-protegida--layout"},"Pagina protegida / Layout"),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"En quaser existen las carpetas")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Pages : Donde est\xe1n las paginas , se suele llamar views"),(0,r.yg)("li",{parentName:"ul"},"Router  : Se encuentra el router")))),(0,r.yg)("h3",{id:"pagina-protegida"},'Pagina "protegida"'),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Creamos una pagina \u201cprotegida\u201d")),(0,r.yg)("p",null,"src/pages/ProtectedPage.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"<template>\n<h3>Ruta protegida</h3>\n</template>\n\n")),(0,r.yg)("h3",{id:"configuracion-de-rutas"},"Configuracion de rutas"),(0,r.yg)("p",null,"src/routes/routes.js"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Aca est\xe1n todas las rutas.")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Analisis ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("pre",{parentName:"div"},(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const routes = [\n  {\n    path: '/',\n    component: () => import('layouts/MainLayout.vue'),\n    children: [\n      { path: '', component: () => import('pages/IndexPage.vue') }\n    ]\n  },\n\n  // Always leave this as last one,\n  // but you can also remove it\n  {\n    path: '/:catchAll(.*)*',\n    component: () => import('pages/ErrorNotFound.vue')\n  }\n]\n\nexport default routes\n\n")),(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Todos los children son componentes (provienen de views/pages) que van a tener el mismo layout(dise\xf1o)."),(0,r.yg)("li",{parentName:"ul"},"Lo que figura en component  ('layouts/MainLayout.vue') se va a renderizar en todos los componentes children"),(0,r.yg)("li",{parentName:"ul"},"MainLayout Se va a renderizar en todos los componentes hijos")))),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Lo modificamos:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const routes = [\n  {\n    path: '/',\n    component: () => import('layouts/MainLayout.vue'),\n    children: [\n      { path: '', component: () => import('pages/IndexPage.vue') },\n      { path: 'protected', component: () => import('pages/ProtectedPage.vue') },\n      { path: 'login', component: () => import('pages/LoginPage.vue') },\n    ]\n  },\n\n  // Always leave this as last one,\n  // but you can also remove it\n  {\n    path: '/:catchAll(.*)*',\n    component: () => import('pages/ErrorNotFound.vue')\n  }\n]\n")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Explicacion ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"La propiedad path de nivel superior(path:\u2019/\u2019) es la ruta en donde se va a renderizar el componente padre. Que a su vez esta anidada con las rutas de los componentes hijos."),(0,r.yg)("li",{parentName:"ul"},"Ej. Componentepadre/componentehijo ")),(0,r.yg)("p",{parentName:"div"},"Componente padre = /"),(0,r.yg)("p",{parentName:"div"},"Componente hijo = protected"),(0,r.yg)("p",{parentName:"div"},"Ruta = /protected"),(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"La propiedad children  tiene un array con los componentes hijos y sus rutas.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"El valor de la propiedad path (de los children) contiene la url en donde se va a renderizar el componente children ")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Por lo tanto:"))),(0,r.yg)("p",{parentName:"div"},"http://localhost:9000/ : Se renderiza el componente IndexPage  y MainLayout"),(0,r.yg)("p",{parentName:"div"},"http://localhost:9000/protected : Se renderiza el componente ProtectedPage y MainLayout"))),(0,r.yg)("h2",{id:"pinia"},"Pinia"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Nos permite trabajar con el Composition API (Como si fuera un ","<","script setup>)"),(0,r.yg)("li",{parentName:"ul"},"Gracias a quasar ya tenemos la carpeta stores creado con la tienda.")),(0,r.yg)("h4",{id:"vamos-a-crear-una-tienda-que-trabaje-con-la-composition-api"},"Vamos a crear una tienda que trabaje con la Composition Api"),(0,r.yg)("p",null,"stores/user-store.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"import { defineStore } from 'pinia';\nimport { ref } from 'vue';\nexport const useUserStore = defineStore('user',\n  () => {\n    const token = ref('tokenGlobal');\n    const expiresIn = ref('');\n\n    return {\n      token, expiresIn\n    }\n  });\n\n")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observacion ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("p",{parentName:"div"}," Devuelve el token y la expiraci\xf3n."))),(0,r.yg)("p",null,"Pages/LoginPage.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"<template>\n  <h3>Login {{ userStore.token }}</h3>\n</template>\n\n<script setup>\nimport { useUserStore } from '../stores/user-store';\n\nconst userStore = useUserStore();\n\n<\/script>\n\n")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observacion ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("p",{parentName:"div"},"Accede al token que devuelve la store."))),(0,r.yg)("h3",{id:"le-a\xf1adimos--m\xe9todos-a-la-store"},"Le a\xf1adimos  m\xe9todos a la Store"),(0,r.yg)("p",null,"stores/user-store.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"import { defineStore } from 'pinia';\nimport { ref } from 'vue';\nimport { api } from 'src/boot/axios';\nexport const useUserStore = defineStore('user',\n  () => {\n  const token = ref(null);\n    const expiresIn = ref(null);\n    const access = async () => {\n\n      try {\n        console.log(\"Me diste click\");\n        // axios(url , {datos que se van a mandar por el body (se convierte en json de forma automatica)}\n        // devuelve una promesa\n        const res = await api.post('/api/login', {\n          email: \"usuario@test.com\",\n          password: \"123456\"\n        })\n        //Asignamos el valor\n        token.value = res.data.token\n        expiresIn.value = res.data.expiresIn;\n        setTime();\n      } catch (e) {\n        console.log(e);\n      }\n\n    }\n    const refreshToken = async () => {\n      try {\n        const res = await api.get('/api/refresh');\n        token.value = res.data.token\n        expiresIn.value = res.data.expiresIn;\n        setTime();\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    const setTime = () => {\n      setTimeout(() => {\n        refreshToken()\n      }, expiresIn.value * 1000 - 6000)\n    }\n    return {\n      token, expiresIn, access, refreshToken\n    }\n  });\n\n")),(0,r.yg)("p",null,"indexPage.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"\n<template>\n  \x3c!-- A\xf1adimos padding --\x3e\n  <q-page padding>\n    \x3c!-- Componente q-btn (un button)--\x3e\n    <q-btn @click=\"userStore.access\">Ingresar</q-btn>\n    <q-btn @click=\"createLink\">Crear un link</q-btn>\n    {{ userStore.token }} -- {{ userStore.expiresIn }}\n  </q-page>\n</template>\n\n<script setup>\nimport { api } from 'src/boot/axios';\nimport { useUserStore } from '../stores/user-store';\nconst userStore = useUserStore();\nuserStore.refreshToken();\nconst createLink = async () => {\n  try {\n    //axios({configuraciones})\n    const res = await api({\n      // Metodo de Peticion (GET , POST , ETC)\n      method: 'POST',\n      // URL\n      url: 'api/links',\n      // Cabecera de la peticion\n      headers: {\n        'Authorization': 'Bearer ' + token.value\n      },\n      // La informacion que se manda por el body\n      // Axios por atras lo convierte en JSON\n      data: {\n        longLink: 'https://fedeleva.github.io/documentacion/docs/Node/apiRest#crear'\n      }\n    })\n    console.log(res.data);\n  } catch (error) {\n    console.log(error)\n  }\n}\n<\/script>\n\n")),(0,r.yg)("h2",{id:"cerrar-sesion"},"Cerrar sesion"),(0,r.yg)("p",null,"User-store.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"    const logout = async () => {\n      try {\n        await api.get('/api/logout');\n\n      } catch (error) {\n        console.log(error);\n      } finally {\n        resetStore();\n      }\n    }\n\n    const resetStore = () => {\n      token.value = null;\n      expiresIn.value = null;\n\n    }\n    return {\n      token, expiresIn, access, refreshToken, logout\n    }\n\n")),(0,r.yg)("p",null,"IndexPage.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'<template>\n  \x3c!-- A\xf1adimos padding --\x3e\n  <q-page padding>\n    \x3c!-- Componente q-btn (un button)--\x3e\n    <q-btn @click="userStore.access">Ingresar</q-btn>\n    <q-btn @click="createLink">Crear un link</q-btn>\n    <q-btn @click="userStore.logout">Salir</q-btn>\n    {{ userStore.token }} -- {{ userStore.expiresIn }}\n  </q-page>\n</template>\n')),(0,r.yg)("h2",{id:"ruta-protegida"},"Ruta Protegida"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"A\xf1adimos los botones en el menu")),(0,r.yg)("p",null,"Layouts/MainLayout.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"<template>\n  <q-layout view=\"lHh Lpr lFf\">\n    <q-header elevated>\n      <q-toolbar>\n        <q-btn flat dense round icon=\"menu\" aria-label=\"Menu\" @click=\"toggleLeftDrawer\" />\n\n        <q-toolbar-title>\n          Quasar App\n        </q-toolbar-title>\n\n        <q-btn color=\"dark\" to=\"/\">Inicio</q-btn>\n        <q-btn color=\"green\" @click=\"userStore.access\" v-if=\"!userStore.token\">Login</q-btn>\n        <q-btn color=\"red\" @click=\"userStore.logout\" v-if=\"userStore.token\">Logout</q-btn>\n        <q-btn color=\"orange\" to=\"/protected\" v-if=\"userStore.token\">Protected</q-btn>\n      </q-toolbar>\n    </q-header>\n\n    <q-drawer v-model=\"leftDrawerOpen\" show-if-above bordered>\n      <q-list>\n        <q-item-label header>\n          Essential Links\n        </q-item-label>\n\n        <EssentialLink v-for=\"link in essentialLinks\" :key=\"link.title\" v-bind=\"link\" />\n      </q-list>\n    </q-drawer>\n\n    <q-page-container>\n      <router-view />\n    </q-page-container>\n  </q-layout>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { useUserStore } from 'src/stores/user-store';\nimport EssentialLink from 'components/EssentialLink.vue'\nconst leftDrawerOpen = ref(false)\nconst essentialLinks = [\n  {\n    title: 'Docs',\n    caption: 'quasar.dev',\n    icon: 'school',\n    link: 'https://quasar.dev'\n  },\n  {\n    title: 'Github',\n    caption: 'github.com/quasarframework',\n    icon: 'code',\n    link: 'https://github.com/quasarframework'\n  },\n  {\n    title: 'Discord Chat Channel',\n    caption: 'chat.quasar.dev',\n    icon: 'chat',\n    link: 'https://chat.quasar.dev'\n  },\n  {\n    title: 'Forum',\n    caption: 'forum.quasar.dev',\n    icon: 'record_voice_over',\n    link: 'https://forum.quasar.dev'\n  },\n  {\n    title: 'Twitter',\n    caption: '@quasarframework',\n    icon: 'rss_feed',\n    link: 'https://twitter.quasar.dev'\n  },\n  {\n    title: 'Facebook',\n    caption: '@QuasarFramework',\n    icon: 'public',\n    link: 'https://facebook.quasar.dev'\n  },\n  {\n    title: 'Quasar Awesome',\n    caption: 'Community Quasar projects',\n    icon: 'favorite',\n    link: 'https://awesome.quasar.dev'\n  }\n]\nconst userStore = useUserStore();\nfunction toggleLeftDrawer() {\n  leftDrawerOpen.value = !leftDrawerOpen.value\n}\n<\/script>\n\n")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Quasar props to")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("p",{parentName:"div"},"Quasar nos brinda la props to para redireccionar a otra url  usando vue router."))),(0,r.yg)("p",null,"indexPage.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"<template>\n  \x3c!-- A\xf1adimos padding --\x3e\n  <q-page padding>\n    {{ userStore.token }} -- {{ userStore.expiresIn }}\n  </q-page>\n</template>\n\n")),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Configuramos el router ")),(0,r.yg)("h3",{id:"metodo-beforeeach"},"Metodo beforeEach"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"El Router de Vue tiene el metodo beforeEach"),(0,r.yg)("li",{parentName:"ul"},"Como par\xe1metro tiene un callback con tres par\xe1metros (to , from , next)"),(0,r.yg)("li",{parentName:"ul"},"El callback se ejecuta cada vez que cargamos una URL.")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"  Router.beforeEach((to, from, next) => {\n\n  })\n\n")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Si lo deja vac\xedo, la pagina no cargara ya que no se ejecuta el next().")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Es muy parecido a los middlewares de express. (los tres parametros)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"next() = Ejecuta/Renderiza el componente que se indic\xf3 a trav\xe9s de la url.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"To = Contiene informaci\xf3n de la url actual. Entre ellas se encuentra el meta.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"El next tambi\xe9n sirve para redireccionar a otra url.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Ej.\nRedirecciona al login"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-js"},"next('/login');\n")))),(0,r.yg)("h4",{id:"una-url-con-meta"},"Una url con meta:"),(0,r.yg)("p",null,"Router/routes.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const routes = [\n  {\n    path: '/',\n    component: () => import('layouts/MainLayout.vue'),\n    children: [\n      { path: '', component: () => import('pages/IndexPage.vue') },\n      {\n        path: 'protected', component: () => import('pages/ProtectedPage.vue'),\n        meta: {\n          auth: true\n        }\n      },\n      { path: 'login', component: () => import('pages/LoginPage.vue') },\n    ]\n  },\n\n")),(0,r.yg)("p",null,"Router/index.js"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Leemos toda la informaci\xf3n (incluida el meta que configuramos anteriormente)")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"}," const Router = createRouter({\n    scrollBehavior: () => ({ left: 0, top: 0 }),\n    routes,\n\n    // Leave this as is and make changes in quasar.conf.js instead!\n    // quasar.conf.js -> build -> vueRouterMode\n    // quasar.conf.js -> build -> publicPath\n    history: createHistory(process.env.VUE_ROUTER_BASE)\n  })\n  Router.beforeEach((to, from, next) => {\n    console.log(to);\n    // Renderize el componente\n    next();\n  })\n  return Router\n\n")),(0,r.yg)("h3",{id:"configuramos-la-ruta-protegida"},"Configuramos la ruta protegida"),(0,r.yg)("p",null,"Router/index.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"import { route } from 'quasar/wrappers'\nimport { useUserStore } from 'src/stores/user-store'\nimport { createRouter, createMemoryHistory, createWebHistory, createWebHashHistory } from 'vue-router'\nimport routes from './routes'\n\n/*\n * If not building with SSR mode, you can\n * directly export the Router instantiation;\n *\n * The function below can be async too; either use\n * async/await or return a Promise which resolves\n * with the Router instance.\n */\n\nexport default route(function (/* { store, ssrContext } */) {\n  const createHistory = process.env.SERVER\n    ? createMemoryHistory\n    : (process.env.VUE_ROUTER_MODE === 'history' ? createWebHistory : createWebHashHistory)\n\n  const Router = createRouter({\n    scrollBehavior: () => ({ left: 0, top: 0 }),\n    routes,\n\n    // Leave this as is and make changes in quasar.conf.js instead!\n    // quasar.conf.js -> build -> vueRouterMode\n    // quasar.conf.js -> build -> publicPath\n    history: createHistory(process.env.VUE_ROUTER_BASE)\n  })\n  Router.beforeEach((to, from, next) => {\n    const userStore = useUserStore();\n    const requiredAuth = to.meta.auth;\n    // Si la ruta es protegida\n    if (requiredAuth) {\n      //validar al usuario o token\n      if (userStore.token) {\n        return next();\n      }\n      return next('/login');\n    } else {\n      next();\n    }\n\n  })\n  return Router\n})\n\n")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observacion ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Solo se podr\xe1 acceder a la ruta protegida si existe el token."),(0,r.yg)("li",{parentName:"ul"},"Utilizamos el meta de la ruta /protected para verificar si la ruta es protegida")))),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("p",{parentName:"div"},"El m\xe9todo useUserStore() se debe llamar dentro de un m\xe9todo. (en caso contrario no se garantiza su funcionamiento)"))),(0,r.yg)("h4",{id:"redireccionamos-los-botones-de-iniciar-sesion-y-cerrar-sesion"},"Redireccionamos los botones de Iniciar sesion y cerrar sesion"),(0,r.yg)("p",null,"MainLayout.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'   <q-btn color="red" @click="logout" v-if="userStore.token">Logout</q-btn>\n  <q-btn color="green" @click="access" v-if="!userStore.token">Login</q-btn>\n\n\nimport { useRouter } from \'vue-router\';\nconst router = useRouter();\nconst logout = () => {\n  userStore.logout();\n  router.push(\'/login\');\n}\nconst access = () => {\n  userStore.access();\n  router.push(\'/\');\n}\n\n')),(0,r.yg)("h2",{id:"a\xf1adimos-persistencia-de-la-sesion-del--usuario"},"A\xf1adimos persistencia de la sesion del  usuario"),(0,r.yg)("p",null,"Router/index.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"  Router.beforeEach(async (to, from, next) => {\n    const userStore = useUserStore();\n    const requiredAuth = to.meta.auth;\n    // Si existe el token en memoria\n    if (userStore.token) {\n      return next();\n    }\n    //Si no existe el token\n    if (localStorage.getItem('user')) {\n      await userStore.refreshToken();\n      // Si la ruta es protegida\n      if (requiredAuth) {\n        //validar al usuario o token\n        if (userStore.token) {\n          return next();\n        }\n        return next('/login');\n      } else {\n        return next();\n      }\n    } else {\n      if (requiredAuth) {\n        await userStore.refreshToken();\n        if (userStore.token) {\n          return next();\n        }\n        return next('/login');\n\n      }\n\n      next();\n    }\n\n  })\n\n")),(0,r.yg)("h4",{id:"abreviacion"},"Abreviacion"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"  Router.beforeEach(async (to, from, next) => {\n    const userStore = useUserStore();\n    const requiredAuth = to.meta.auth;\n    // Si existe el token en memoria\n    if (userStore.token) {\n      return next();\n    }\n    //Si no existe el token\n    if (requiredAuth || localStorage.getItem('user')) {\n      await userStore.refreshToken();\n      if (userStore.token) {\n        return next();\n      }\n      return next(\"/login\");\n    }\n    return next();\n\n\n  })\n\n")),(0,r.yg)("p",null,"user-store.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"   const access = async () => {\n\n      try {\n        console.log(\"Me diste click\");\n        // axios(url , {datos que se van a mandar por el body (se convierte en json de forma automatica)}\n        // devuelve una promesa\n        const res = await api.post('/api/login', {\n          email: \"usuario@test.com\",\n          password: \"123456\"\n        })\n        //Asignamos el valor\n        token.value = res.data.token\n        expiresIn.value = res.data.expiresIn;\n        // Creamos un dato en el localStorage\n        localStorage.setItem('user', true);\n\n        setTime();\n      } catch (e) {\n        console.log(e);\n      }\n\n    }\n\n const refreshToken = async () => {\n      try {\n        const res = await api.get('/api/refresh');\n        token.value = res.data.token\n        expiresIn.value = res.data.expiresIn;\n        // Creamos un dato en el localStorage\n        localStorage.setItem('user', true);\n        setTime();\n      } catch (error) {\n        console.log(error);\n        // Borramos un dato del localStorage\n        localStorage.removeItem('user');\n      }\n    }\n\n    const logout = async () => {\n      try {\n        await api.get('/api/logout');\n\n      } catch (error) {\n        console.log(error);\n      } finally {\n        resetStore();\n        // Borramos un dato del localStorage\n        localStorage.removeItem('user');\n      }\n    }\n\n")),(0,r.yg)("h2",{id:"login"},"Login"),(0,r.yg)("p",null,"user-store.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"    const access = async (email, password) => {\n\n      try {\n        console.log(\"Te estas logeando\");\n        // axios(url , {datos que se van a mandar por el body (se convierte en json de forma automatica)}\n        // devuelve una promesa\n        const res = await api.post('/api/login', {\n          email,\n          password\n        })\n        //Asignamos el valor\n        token.value = res.data.token\n        expiresIn.value = res.data.expiresIn;\n        // Creamos un dato en el localStorage\n        localStorage.setItem('user', true);\n        setTime();\n      } catch (e) {\n        console.log(e);\n      }\n\n    }\n\n")),(0,r.yg)("p",null,"MainLayout.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'   <q-btn color="green" to="/login" v-if="!userStore.token">Login</q-btn>\n')),(0,r.yg)("p",null,"LoginPage.vue"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://quasar.dev/vue-components/form"},"Componentes del formulario"))),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'<template>\n  <q-page padding class="row justify-center">\n    <div class="col-12 col-sm-6 col-md-5">\n      <h3>Login {{ userStore.token }}</h3>\n      <q-form @submit.prevent="handleSubmit">\n        <q-input v-model="email" label="Ingrese email">\n\n        </q-input>\n        <q-input v-model="password" label="Ingrese contrase\xf1a">\n\n        </q-input>\n        <div>\n          <q-btn label="Login" type="submit"></q-btn>\n        </div>\n      </q-form>\n    </div>\n\n  </q-page>\n\n</template>\n\n<script setup>\nimport { useUserStore } from \'../stores/user-store\';\nimport { ref } from \'vue\';\nconst userStore = useUserStore();\nconst email = ref(\'\');\nconst password = ref(\'\');\nconst handleSubmit = async () => {\n  try {\n\n    console.log(email.value)\n    console.log(password.value)\n    // await userStore.access();\n  } catch (error) {\n    console.log(error);\n  }\n}\n<\/script>\n\n<style>\n</style>\n\n')),(0,r.yg)("h3",{id:"validaciones"},"Validaciones"),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"props rules ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Usamos la props rules para validacion"),(0,r.yg)("li",{parentName:"ul"},"Recibe un array con funciones"),(0,r.yg)("li",{parentName:"ul"},"Cada funci\xf3n recibe el valor del input y  realiza una validacion (devuelve true si se logra validar y si no se cumple, devuelve un mensaje) .")))),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"retorno")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"condici\xf3n && = Verifica que sea true"),(0,r.yg)("li",{parentName:"ul"},"condici\xf3n || = Verifica que sea false")))),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"http://w3.unpocodetodo.info/utiles/regex-ejemplos.php?type=email"},"Expresion regular email"))),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'<template>\n  <q-page padding class="row justify-center">\n    <div class="col-12 col-sm-6 col-md-5">\n      <h3>Login {{ userStore.token }}</h3>\n      <q-form @submit.prevent="handleSubmit">\n        <q-input v-model="email" label="Ingrese email" type="text" :rules="[\n      //  (val) => (Validacion) || Mensaje de error\n      (val) => (val && val.length > 3) || \'Escriba algo \ud83e\udd21\ud83e\udd21\ud83e\udd21\'\n      ,\n      (val) =>\n        /^[^@]+@[^@]+\\.[a-zA-Z]{2,}$/.test(val) ||\n        \'Formato Email incorrecto\']">\n\n        </q-input>\n        <q-input v-model="password" label="Ingrese contrase\xf1a" type="password" :rules="[\n          (val) => (val && val.length >= 6) || \'Escriba algo VAGONETA \ud83e\udd21\ud83e\udd21\ud83e\udd21\'\n        ]">\n        </q-input>\n        <div>\n          <q-btn label="Login" type="submit"></q-btn>\n        </div>\n      </q-form>\n    </div>\n\n  </q-page>\n\n</template>\n<script setup>\nimport { useUserStore } from \'../stores/user-store\';\nimport { ref } from \'vue\';\nconst userStore = useUserStore();\nconst email = ref(\'usuario@test.com\');\nconst password = ref(\'123456\');\nconst handleSubmit = async () => {\n  try {\n    await userStore.access(email.value, password.value);\n  } catch (error) {\n    console.log(error);\n  }\n}\n<\/script>\n\n')),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observacion ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Valida los datos que se env\xeda a trav\xe9s del formulario."),(0,r.yg)("li",{parentName:"ul"},"Si es todo correcto, se ejecuta la funci\xf3n handleSubmit()."),(0,r.yg)("li",{parentName:"ul"},"La funci\xf3n handleSubmit() inicia sesion.")))),(0,r.yg)("h3",{id:"validaciones-de-la-api-codigo-de-respuesta-diferente-a-2xx"},"Validaciones de la API (Codigo de respuesta diferente a 2xx)"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://axios-http.com/es/docs/handling_errors"},"Como maneja los errores Axios")),(0,r.yg)("li",{parentName:"ul"},"Axios maneja las respuestas del servidor relacionadas con errores (403, 404, etc) de otra forma"),(0,r.yg)("li",{parentName:"ul"},"Si como respuesta, te devuelve un c\xf3digo de respuesta distinto a 200, se maneja en el catch.")),(0,r.yg)("p",null,"user-store.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"  const access = async (email, password) => {\n\n      try {\n        console.log(\"Te estas logeando\");\n        // axios(url , {datos que se van a mandar por el body (se convierte en json de forma automatica)}\n        // devuelve una promesa\n        const res = await api.post('/api/login', {\n          email,\n          password\n        })\n        //Asignamos el valor\n        token.value = res.data.token\n        expiresIn.value = res.data.expiresIn;\n        // Creamos un dato en el localStorage\n        localStorage.setItem('user', true);\n        setTime();\n      } catch (error) {\n        if (error.response) {\n          // La respuesta fue hecha y el servidor respondi\xf3 con un c\xf3digo de estado\n          // que esta fuera del rango de 2xx\n          console.log(error.response.data);\n          console.log(error.response.status);\n          console.log(error.response.headers);\n        } else if (error.request) {\n          // La petici\xf3n fue hecha pero no se recibi\xf3 respuesta\n          // `error.request` es una instancia de XMLHttpRequest en el navegador y una instancia de\n          // http.ClientRequest en node.js\n          console.log(error.request);\n        } else {\n          // Algo paso al preparar la petici\xf3n que lanzo un Error\n          console.log('Error', error.message);\n        }\n        console.log(error.config);\n      }\n\n    }\n\n")),(0,r.yg)("h4",{id:"empezamos-a-trabajar-en-el-catch-de-la-funci\xf3n-access"},"Empezamos a trabajar en el catch de la funci\xf3n access:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Usamos el throw para lanzar un error")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"catch (error) {\n        if (error.response) {\n// Lanzamos un error \n          throw error.response.data;\n        } else if (error.request) {\n\n          console.log(error.request);\n        } else {\n          console.log('Error', error.message);\n        }\n      }\n\n")),(0,r.yg)("p",null,"LoginPage.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"<script setup>\nimport { useUserStore } from '../stores/user-store';\nimport { ref } from 'vue';\nconst userStore = useUserStore();\nconst email = ref('');\nconst password = ref('');\nconst handleSubmit = async () => {\n  try {\n    await userStore.access(email.value, password.value);\n  } catch (error) {\n    console.log(error);\n  }\n}\n<\/script>\n\n")),(0,r.yg)("h3",{id:"empezamos-a-trabajar-con-el-dialogo"},"Empezamos a trabajar con el dialogo."),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"validaciones backend ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Las validaciones del backend se tratan de otra forma"),(0,r.yg)("li",{parentName:"ul"},"Se recomienda que siempre sea el mismo mensaje de error , para mayor seguridad"),(0,r.yg)("li",{parentName:"ul"},"Ej. Ingrese el email correctamente")))),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://quasar.dev/quasar-plugins/dialog"},"plugin dialogo"))),(0,r.yg)("h4",{id:"empezamos"},"Empezamos"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Instalamos el plugin de Dialog ")),(0,r.yg)("p",null,"quasar.config.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"    framework: {\n      config: {},\n\n      // iconSet: 'material-icons', // Quasar icon set\n      // lang: 'en-US', // Quasar language pack\n\n      // For special cases outside of where the auto-import strategy can have an impact\n      // (like functional components as one of the examples),\n      // you can manually specify Quasar components/directives to be available everywhere:\n      //\n      // components: [],\n      // directives: [],\n\n      // Quasar plugins\n      plugins: [\n        'Dialog'\n      ]\n    }\n\n")),(0,r.yg)("p",null,"LoginPage.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"<script setup>\nimport { useUserStore } from '../stores/user-store';\nimport { ref } from 'vue';\nimport { useQuasar } from 'quasar'\nimport { useRouter } from 'vue-router';\nconst userStore = useUserStore();\nconst email = ref('');\nconst password = ref('');\nconst router = useRouter();\n// $q tiene los metodos para crear los dialogos\nconst $q = useQuasar()\nconst handleSubmit = async () => {\n  try {\n    await userStore.access(email.value, password.value);\n    router.push('/');\n    email.value = '';\n    password.value = '';\n\n  } catch (error) {\n    console.log(error);\n    alertDialogBackend(error.error);\n\n  }\n}\nconst alertDialogBackend = (message = 'Error en el servidor') => {\n  // Creamos un dialogo\n  $q.dialog({\n    title: 'Error',\n    message\n  })\n}\n<\/script>\n\n")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"backend vs frontend ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Las Validaciones en el backend son obligatorias porque aportan seguridad"),(0,r.yg)("li",{parentName:"ul"},"Las validaciones del frontend solo ayudan al usuario."),(0,r.yg)("li",{parentName:"ul"},"Por lo tanto siempre hay que gestionar las validaciones del backend y frontend al realizar un formulario.")))),(0,r.yg)("h2",{id:"register"},"Register"),(0,r.yg)("p",null,"router/routes.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const routes = [\n  {\n    path: '/',\n    component: () => import('layouts/MainLayout.vue'),\n    children: [\n      {\n        path: '', component: () => import('pages/IndexPage.vue'), meta: {\n          auth: true\n        }\n      },\n      {\n        path: 'protected', component: () => import('pages/ProtectedPage.vue'),\n        meta: {\n          auth: true\n        }\n      },\n      { path: 'login', component: () => import('pages/LoginPage.vue') },\n      { path: 'register', component: () => import('pages/RegisterPage.vue') },\n    ]\n  },\n\n  // Always leave this as last one,\n  // but you can also remove it\n  {\n    path: '/:catchAll(.*)*',\n    component: () => import('pages/ErrorNotFound.vue')\n  }\n]\n\n")),(0,r.yg)("p",null,"MainLayout.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'    <q-header elevated>\n      <q-toolbar>\n        <q-btn flat dense round icon="menu" aria-label="Menu" @click="toggleLeftDrawer" />\n\n        <q-toolbar-title>\n          Quasar App\n        </q-toolbar-title>\n\n        <q-btn class="q-mr-sm" color="dark" to="/" v-if="userStore.token">Inicio</q-btn>\n        <q-btn class="q-mr-sm" color="green" to="/register" v-if="!userStore.token">Register</q-btn>\n        <q-btn class="q-mr-sm" color="green" to="/login" v-if="!userStore.token">Login</q-btn>\n        <q-btn class="q-mr-sm" color="red" @click="logout" v-if="userStore.token">Logout</q-btn>\n        <q-btn class="q-mr-sm" color="orange" to="/protected" v-if="userStore.token">Protected</q-btn>\n      </q-toolbar>\n    </q-header>\n\n')),(0,r.yg)("p",null,"User-store.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"}," const access = async (email, password) => {\n\n      try {\n        console.log(\"Te estas logeando\");\n        // axios(url , {datos que se van a mandar por el body (se convierte en json de forma automatica)}\n        // devuelve una promesa\n        const res = await api.post('/api/login', {\n          email,\n          password\n        })\n        //Asignamos el valor\n        token.value = res.data.token\n        expiresIn.value = res.data.expiresIn;\n        // Creamos un dato en el localStorage\n        localStorage.setItem('user', true);\n        setTime();\n      } catch (error) {\n        if (error.response) {\n          throw error.response.data;\n        } else if (error.request) {\n\n          console.log(error.request);\n        } else {\n          console.log('Error', error.message);\n        }\n      }\n\n    }\n    const register = async (email, password, repassword) => {\n\n      try {\n        console.log(\"Te estas logeando\");\n        // axios(url , {datos que se van a mandar por el body (se convierte en json de forma automatica)}\n        // devuelve una promesa\n        const res = await api.post('/api/register', {\n          email,\n          password,\n          repassword\n        })\n        //Asignamos el valor\n        token.value = res.data.token\n        expiresIn.value = res.data.expiresIn;\n        // Creamos un dato en el localStorage\n        localStorage.setItem('user', true);\n        setTime();\n      } catch (error) {\n        if (error.response) {\n          throw error.response.data;\n        } else if (error.request) {\n\n          console.log(error.request);\n        } else {\n          console.log('Error', error.message);\n        }\n      }\n\n    }\n   return {\n      token, expiresIn, access, refreshToken, logout, register\n    }\n\n")),(0,r.yg)("p",null,"Pages/RegisterPage.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"<template>\n  <q-page padding class=\"row justify-center\">\n    <div class=\"col-12 col-sm-6 col-md-5\">\n      <h3>Register </h3>\n      <q-form @submit.prevent=\"handleSubmit\">\n\n        <q-input v-model=\"email\" label=\"Ingrese email\" type=\"text\" :rules=\"[\n      // (val) => (Validacion) || Mensaje de error\n      (val) => (val && val.length > 3) || 'Escriba algo \ud83e\udd21\ud83e\udd21\ud83e\udd21'\n      ,\n      (val) =>\n        /^[^@]+@[^@]+\\.[a-zA-Z]{2,}$/.test(val) ||\n        'Formato Email incorrecto']\">\n\n        </q-input>\n\n        <q-input v-model=\"password\" label=\"Ingrese contrase\xf1a\" type=\"password\" :rules=\"[\n          (val) => (val && val.length >= 6) || 'Escriba algo VAGONETA \ud83e\udd21\ud83e\udd21\ud83e\udd21'\n        ]\">\n        </q-input>\n        <q-input v-model=\"repassword\" label=\"Repita contrase\xf1a\" type=\"password\" :rules=\"[\n          (val) => (val && val === password) || 'No coinciden las contrase\xf1as'\n        ]\">\n        </q-input>\n        <div>\n          <q-btn label=\"Register\" type=\"submit\"></q-btn>\n        </div>\n      </q-form>\n    </div>\n\n  </q-page>\n\n</template>\n\n<script setup>\nimport { useUserStore } from '../stores/user-store';\nimport { ref } from 'vue';\nimport { useQuasar } from 'quasar'\nimport { useRouter } from 'vue-router';\nconst userStore = useUserStore();\nconst email = ref('usuario@test.com');\nconst password = ref('123456');\nconst repassword = ref('123456');\nconst router = useRouter();\n// $q tiene los metodos para crear los dialogos\nconst $q = useQuasar()\nconst handleSubmit = async () => {\n  try {\n    await userStore.register(email.value, password.value, repassword.value);\n    router.push('/');\n    email.value = '';\n    password.value = '';\n    repassword.value = '';\n\n  } catch (error) {\n    console.log(error);\n    alertDialogBackend(error.error);\n\n  }\n}\nconst alertDialogBackend = (message = 'Error en el servidor') => {\n  // Creamos un dialogo\n  $q.dialog({\n    title: 'Error',\n    message\n  })\n}\n<\/script>\n\n<style>\n</style>\n\n")),(0,r.yg)("h2",{id:"crear-link"},"Crear Link"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"stores/url-store.js ")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("a",{parentName:"p",href:"https://pinia.vuejs.org/core-concepts/actions.html#accessing-other-stores-actions"},"Usar una store dentro de otra store")))),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"import { defineStore } from 'pinia';\nimport { api } from 'src/boot/axios';\nimport { useUserStore } from './user-store';\nimport { ref } from 'vue';\nexport const useLinkStore = defineStore('Link', () => {\n  const useStore = useUserStore();\n  const links = ref([]);\n  const createLink = async (longLink) => {\n\n    try {\n      // api({configuracion})\n      const res = await api({\n        url: '/api/links/',\n        method: \"POST\",\n        headers: {\n          Authorization: \"Bearer \" + useStore.token\n        },\n        data: {\n          longLink\n        }\n      })\n      console.log(res.data);\n      links.value.push(res.data.link);\n    } catch (error) {\n\n      console.log(error.response?.data || error);\n    }\n  }\n\n  return {\n    createLink, links\n  }\n});\n\n")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observacion ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Usamos el axios de otra forma ( con un solo objeto de configuraci\xf3n)"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://axios-http.com/es/docs/handling_errors"},"Se tratan las respuestas  del servidor cuyo c\xf3digo de respuesta sea distinto a 200 en el catch"))))),(0,r.yg)("p",null,"IndexPage.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"<template>\n  \x3c!-- A\xf1adimos padding --\x3e\n  <q-page padding>\n    <q-btn @click=\"useLink.createLink('https://docusaurus.io/docs/docusaurus-core')\">Crear\n      link</q-btn>\n    <pre>\n       {{ useLink.links }}\n      </pre>\n  </q-page>\n</template>\n\n<script setup>\nimport { useLinkStore } from 'src/stores/url-store';\nconst useLink = useLinkStore();\n\n<\/script>\n\n")),(0,r.yg)("h2",{id:"obtener-links"},"Obtener links"),(0,r.yg)("p",null,"url-store.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const getLinks = async () => {\n    try {\n      console.log("Llamando a la peticion");\n      const res = await api({\n        url: \'/api/links/\',\n        method: "GET",\n        headers: {\n          Authorization: "Bearer " + useStore.token\n        }\n\n      })\n      console.log(res.data);\n      links.value = [...res.data.links]\n    } catch (error) {\n      console.log(error.response?.data || error);\n    }\n  }\n  getLinks();\n  return {\n    createLink, links\n  }\n});\n\n')),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observacion ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Cuando \u201ciniciamos\u201d la tienda con el metodo useLinkStore() por primera vez , se inicializan los m\xe9todos , valores y se ejecutan las funciones que llamamos en la store"),(0,r.yg)("li",{parentName:"ul"},"Las funciones que ejecutamos desde la store (getLinks) , solo se ejecutan al inicializar la tienda (\xf3sea solo una vez en toda la ejecuci\xf3n del progama (sitio web))."),(0,r.yg)("li",{parentName:"ul"},"Al ejecutar el useLinkStore() por segunda vez o tercera o  x vez  , utiliza los m\xe9todos y valores ya inicializados.")))),(0,r.yg)("h2",{id:"componente----formulario-agregar-link--notify"},"Componente -- Formulario agregar Link / Notify"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://quasar.dev/quasar-plugins/notify#introduction"},"Para los mensajes vamos a usar el plugin Notify de quasar"))),(0,r.yg)("p",null,"quasar.config.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"    framework: {\n      config: {},\n\n      // iconSet: 'material-icons', // Quasar icon set\n      // lang: 'en-US', // Quasar language pack\n\n      // For special cases outside of where the auto-import strategy can have an impact\n      // (like functional components as one of the examples),\n      // you can manually specify Quasar components/directives to be available everywhere:\n      //\n      // components: [],\n      // directives: [],\n\n      // Quasar plugins\n      plugins: [\n        'Dialog', 'Notify'\n      ]\n    }\n\n")),(0,r.yg)("p",null,"Components/AddLink.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'<script setup>\nimport { useLinkStore } from \'src/stores/url-store\';\nimport { useQuasar } from \'quasar\'\n\nimport { ref } from \'vue\';\nconst link = ref(\'\');\nconst useLink = useLinkStore()\n// $q tiene los metodos para crear las notificaciones\nconst $q = useQuasar()\nconst addLink = async () => {\n  console.log(link.value);\n  try {\n    await useLink.createLink(link.value);\n    $q.notify(\'Link agregado\')\n  } catch (error) {\n    // Creamos un dialogo\n    $q.notify(\'Hubo un error en la validacion\')\n    console.log(error);\n  }\n\n}\n\n<\/script>\n\n<template>\n  <q-form @submit.prevent="addLink">\n    <q-input v-model="link" label="Ingrese link aqui" placeholder="Ingrese su super link" :rules="[\n      val => val && val.trim() !== \'\' || \'Escribe algo por favor\'\n    ]"></q-input>\n    <q-btn class="q-mt-sm full-width" label="Agregar" color="primary" type="submit"></q-btn>\n  </q-form>\n\n</template>\n\n')),(0,r.yg)("p",null,"url-store.js"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Usamos el throw para lanzar un error")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'   const createLink = async (longLink) => {\n\n    try {\n      // api({configuracion})\n      const res = await api({\n        url: \'/api/links/\',\n        method: "POST",\n        headers: {\n          Authorization: "Bearer " + useStore.token\n        },\n        data: {\n          longLink\n        }\n      })\n      console.log(res.data);\n      links.value.push(res.data.link);\n    } catch (error) {\n\n      throw error.response?.data || error\n    }\n  }\n\n')),(0,r.yg)("p",null,"IndexPage.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"\n<template>\n  \x3c!-- A\xf1adimos padding --\x3e\n  <q-page padding>\n    <AddLink></AddLink>\n    <pre>\n       {{ useLink.links }}\n      </pre>\n  </q-page>\n</template>\n\n<script setup>\nimport { useLinkStore } from 'src/stores/url-store';\nimport AddLink from 'src/components/AddLink.vue';\nconst useLink = useLinkStore();\n\n<\/script>\n\n")),(0,r.yg)("h2",{id:"composable-y-loading"},"Composable Y Loading"),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Composables ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Son como los hooks de React"),(0,r.yg)("li",{parentName:"ul"},"Se utilizan para reutilizar l\xf3gica/c\xf3digo.")))),(0,r.yg)("p",null,"src/composables/notifyHook.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"import { useQuasar } from 'quasar'\nexport const useNotify = () => {\n  // $q tiene los metodos para crear las notificaciones\n  const $q = useQuasar()\n  const showNotify = (message, color = 'negative', icon = 'report_problem') => {\n    $q.notify({\n      message, color, icon: icon && null,\n    })\n  }\n  return { showNotify };\n}\n\n")),(0,r.yg)("p",null,"AddLink.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"<script setup>\nimport { useLinkStore } from 'src/stores/url-store';\n\nimport { ref } from 'vue';\nimport { useNotify } from '../composables/notifyHook'\nconst link = ref('');\nconst useLink = useLinkStore()\nconst { showNotify } = useNotify();\nconst addLink = async () => {\n  console.log(link.value);\n  try {\n    await useLink.createLink(link.value);\n    showNotify('Link agregado con exito', 'green');\n  } catch (error) {\n    // Creamos un dialogo\n    showNotify('Error al agregar');\n  }\n\n}\n\n<\/script>\n\n")),(0,r.yg)("h3",{id:"loading"},"Loading"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Quasar ofrece la props loading , si su valor es true se genera la animaci\xf3n de carga y bloquea el bot\xf3n.")),(0,r.yg)("p",null,"AddLink.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const link = ref(\'\');\nconst loading = ref(false);\n\nconst useLink = useLinkStore()\nconst { showNotify } = useNotify();\nconst addLink = async () => {\n  console.log(link.value);\n  try {\n    loading.value = true;\n    await useLink.createLink(link.value);\n    showNotify(\'Link agregado con exito\', \'green\');\n  } catch (error) {\n    // Creamos un dialogo\n    showNotify(\'Error al agregar\');\n  } finally {\n    loading.value = false;\n  }\n\n}\n\n <q-btn class="q-mt-sm full-width" label="Agregar" color="primary" type="submit" :loading="loading"></q-btn>\n\n')),(0,r.yg)("h4",{id:"a\xf1adimos-los-mensajes-de-errores-en-las-notificaciones"},"A\xf1adimos los mensajes de errores en las notificaciones"),(0,r.yg)("p",null,"AddLink.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"  } catch (error) {\n    console.log(error);\n    if (error.errors) {\n      error.errors?.forEach(item => {\n        showNotify(item.msg);\n      });\n      return;\n    }\n    // Creamos un dialogo\n    showNotify('Error al agregar');\n  } finally {\n    loading.value = false;\n  }\n\n")),(0,r.yg)("h2",{id:"mostrar-las-url-en-componentes--props"},"Mostrar las url en componentes / Props"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://quasar.dev/vue-components/card"},"Componente Card")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://materialdesignicons.com/"},"Iconos mdi-v5"))),(0,r.yg)("p",null,"components/LinkCard.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'<script setup>\n// Definimos los props\n// defineProps({ nombreprops : tipo de dato})\ndefineProps(\n  {\n    link: Object\n  }\n)\n<\/script>\n<template>\n  <q-card class="my-card q-mb-sm">\n    <q-card-section>\n      <div class="text-overline">{{ link.nanoLink }}</div>\n      {{ link }}\n    </q-card-section>\n    <q-separator />\n\n    <q-card-actions>\n      \x3c!--  trash-can-outline es el nombre del icono que se encuentra en el sitio web --\x3e\n      \x3c!-- mdi-nombreicono --\x3e\n      <q-btn flat round icon="mdi-trash-can-outline" color="red" />\n      <q-btn flat round icon="mdi-pencil-outline" />\n      <q-btn flat color="primary">\n        Copy\n      </q-btn>\n    </q-card-actions>\n  </q-card>\n</template>\n\n')),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observacion ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Tiene una props llamada link"),(0,r.yg)("li",{parentName:"ul"},"Utilizamos los iconos que habilitamos en quasar ('mdi-v5' )")))),(0,r.yg)("p",null,"IndexPage.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'<template>\n  \x3c!-- A\xf1adimos padding --\x3e\n  <q-page padding>\n    <AddLink class="q-mb-xl"></AddLink>\n    <template v-for="link of useLink.links" :key="link._id">\n      <LinkCard :link="link" />\n    </template>\n  </q-page>\n</template>\n\n<script setup>\nimport { useLinkStore } from \'src/stores/url-store\';\nimport AddLink from \'src/components/AddLink.vue\';\nimport LinkCard from \'src/components/LinkCard.vue\';\nconst useLink = useLinkStore();\n\n<\/script>\n\n')),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observacion")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("p",{parentName:"div"},"el template sirve para no generar un div extra (que contiene todo)"))),(0,r.yg)("h2",{id:"eliminar"},"Eliminar"),(0,r.yg)("p",null,"url-store.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'getLinks();\n  const removeLink = async (_id) => {\n    try {\n      await api({\n        url: `/api/links/${_id}`,\n        method: "DELETE",\n        headers: {\n          Authorization: "Bearer " + useStore.token\n        }\n      })\n      links.value = links.value.filter(item => item._id !== _id);\n    } catch (error) {\n      throw error.response?.data || error;\n    }\n  }\n\n  return {\n    createLink, links, removeLink\n  }\n});\n\n')),(0,r.yg)("p",null,"LinkCard.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'<script setup>\nimport { useQuasar } from \'quasar\'\nimport { useLinkStore } from \'src/stores/url-store\';\nconst useLink = useLinkStore();\nconst $q = useQuasar();\n// Definimos los props\n// defineProps({ nombreprops : tipo de dato})\ndefineProps(\n  {\n    link: Object\n  }\n\n)\nconst deleteLink = async (id) => {\n  // Creamos un dialogo con opciones (Cancelar y Ok)\n  $q.dialog({\n    title: \'Cuidado\',\n    message: \'\xbfQuieres eliminar el elemento?\',\n    cancel: true,\n    persistent: true\n  }).onOk(async () => {\n    // Se pulso Ok\n    try {\n      await useLink.removeLink(id);\n      console.log(\u201cRemovido\u201d);\n    } catch (error) {\n       console.log(error);\n    }\n  })\n\n}\n<\/script>\n<template>\n  <q-card class="my-card q-mb-sm">\n    <q-card-section>\n      <div class="text-overline">{{ link.nanoLink }}</div>\n      {{ link }}\n    </q-card-section>\n    <q-separator />\n\n    <q-card-actions>\n      \x3c!--  trash-can-outline es el nombre del icono que se encuentra en el sitio web --\x3e\n      \x3c!-- mdi-nombreicono --\x3e\n      <q-btn flat round icon="mdi-trash-can-outline" color="red" @click="deleteLink(link._id)" />\n      <q-btn flat round icon="mdi-pencil-outline" />\n      <q-btn flat color="primary">\n        Copy\n      </q-btn>\n    </q-card-actions>\n  </q-card>\n</template>\n\n')),(0,r.yg)("h2",{id:"resetear-valores-de-addlink"},"Resetear valores de addLink"),(0,r.yg)("p",null,"AddLink.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"<script setup>\nimport { useLinkStore } from 'src/stores/url-store';\n\nimport { ref } from 'vue';\nimport { useNotify } from '../composables/notifyHook'\nconst link = ref('');\nconst loading = ref(false);\nconst formAdd = ref(null);\n\nconst useLink = useLinkStore()\nconst { showNotify } = useNotify();\nconst addLink = async () => {\n  console.log(link.value);\n  try {\n    loading.value = true;\n    await useLink.createLink(link.value);\n    showNotify('Link agregado con exito', 'green');\n    console.log(formAdd.value);\n    formAdd.value.reset();\n    link.value = null;\n  } catch (error) {\n    console.log(error);\n    if (error.errors) {\n      error.errors?.forEach(item => {\n        showNotify(item.msg);\n      });\n      return;\n    }\n    // Creamos un dialogo\n    showNotify('Error al agregar');\n  } finally {\n    loading.value = false;\n  }\n\n}\n\n<\/script>\n\n<template>\n  <q-form ref=\"formAdd\" @submit.prevent=\"addLink\">\n\n")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observacion ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Se utiliza la props ref en lugar de v-model "),(0,r.yg)("li",{parentName:"ul"},"Se utiliza un ref del formulario y su m\xe9todo reset().")))),(0,r.yg)("h2",{id:"editar"},"Editar"),(0,r.yg)("p",null,"LinkCard.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'<script setup>\nimport { useLinkStore } from \'src/stores/url-store\';\nimport { useQuasar } from \'quasar\'\nconst useLink = useLinkStore();\nconst $q = useQuasar();\n// Definimos los props\n// defineProps({ nombreprops : tipo de dato})\ndefineProps(\n  {\n    link: Object\n  }\n\n)\nconst deleteLink = async (id) => {\n  // Creamos un dialogo con opciones (Cancelar y Ok)\n  $q.dialog({\n    title: \'Cuidado\',\n    message: \'\xbfQuieres eliminar el elemento?\',\n    cancel: true,\n    persistent: true\n  }).onOk(async () => {\n    // Se pulso Ok\n    try {\n      await useLink.removeLink(id);\n      console.log(\u201cRemovido\u201d);\n    } catch (error) {\n       console.log(error);\n    }\n  })\n\n}\n\nconst updateLink = async (link) => {\n  // Creamos un dialogo de tipo  Prompt (para introducir datos)\n  $q.dialog({\n    title: \'Actualizar LINK\',\n    message: \'Actualiza aqui tu enlace\',\n    prompt: {\n      // El valor que se muestra en el input del dialogo\n      model: link.longLink,\n      type: \'text\' // optional\n    },\n    cancel: true,\n    persistent: true\n  }).onOk(async data => {\n    // Se pulso ok\n    // data = el valor del input\n    // Sobrescribimos la propiedad longLink del objeto link\n    const newLink = { ...link, longLink: data }\n    await useLink.modifiedLink(newLink);\n\n  })\n}\n<\/script>\n<template>\n  <q-card class="my-card q-mb-sm">\n    <q-card-section>\n      <div class="text-overline">{{ link.nanoLink }}</div>\n      {{ link }}\n    </q-card-section>\n    <q-separator />\n\n    <q-card-actions>\n      \x3c!--  trash-can-outline es el nombre del icono que se encuentra en el sitio web --\x3e\n      \x3c!-- mdi-nombreicono --\x3e\n      <q-btn flat round icon="mdi-trash-can-outline" color="red" @click="deleteLink(link._id)" />\n      <q-btn flat round icon="mdi-pencil-outline" @click="updateLink(link)" />\n      <q-btn flat color="primary">\n        Copy\n      </q-btn>\n    </q-card-actions>\n  </q-card>\n</template>\n\n')),(0,r.yg)("p",null,"url-store.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"  const modifiedLink = async (newLink) => {\n    try {\n      await api({\n        url: `/api/links/${newLink._id}`,\n        method: 'PATCH',\n        headers: {\n          Authorization: \"Bearer \" + useStore.token\n        },\n        data: {\n          longLink: newLink.longLink\n        }\n      })\n      links.value = links.value.map(item => item._id === newLink._id ? newLink : item);\n      console.log('actualizado');\n    } catch (error) {\n      // Lanzamos un error\n      throw error.response?.data || error;\n    }\n  }\n  return {\n    createLink, links, removeLink, modifiedLink\n  }\n});\n\n")),(0,r.yg)("h2",{id:"notifyhook-v2"},"notifyHook v2"),(0,r.yg)("p",null,"notifyHook.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"import { useQuasar } from 'quasar'\nexport const useNotify = () => {\n\n  // $q tiene los metodos para crear las notificaciones\n  const $q = useQuasar()\n\n  const errorNotify = (message = 'Error de servidor') => {\n    $q.notify({\n      message, color: 'negative', icon: \"report_problem\"\n    })\n  }\n\n  const successNotify = (message = 'Exito!') => {\n    $q.notify({\n      message, color: 'green', icon: \"report_problem\"\n    })\n  }\n\n  // Obsoleto\n  const showNotify = (message, color = 'negative', icon = 'report_problem') => {\n    $q.notify({\n      message, color, icon: icon && null,\n    })\n  }\n  return { showNotify, errorNotify, successNotify };\n}\n\n")),(0,r.yg)("p",null,"LinkCard.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"<script setup>\nimport { useLinkStore } from 'src/stores/url-store';\nimport { useQuasar } from 'quasar'\nimport { useNotify } from 'src/composables/notifyHook';\nconst useLink = useLinkStore();\nconst { errorNotify, successNotify } = useNotify();\nconst $q = useQuasar();\n// Definimos los props\n// defineProps({ nombreprops : tipo de dato})\ndefineProps(\n  {\n    link: Object\n  }\n\n)\nconst deleteLink = async (id) => {\n  // Creamos un dialogo con opciones (Cancelar y Ok)\n  $q.dialog({\n    title: 'Cuidado',\n    message: '\xbfQuieres eliminar el elemento?',\n    cancel: true,\n    persistent: true\n  }).onOk(async () => {\n    try {\n      await useLink.removeLink(id);\n      successNotify('Se elimino el link');\n    } catch (error) {\n      if (error.errors) {\n        error.errors?.forEach(item => {\n          errorNotify(item.msg);\n        });\n        return;\n      }\n      errorNotify('Error al Eliminar');\n    }\n  })\n}\n\n\n\nconst updateLink = async (link) => {\n  // Creamos un dialogo de tipo  Prompt (para introducir datos)\n  $q.dialog({\n    title: 'Actualizar LINK',\n    message: 'Actualiza aqui tu enlace',\n    prompt: {\n      // El valor que se muestra en el input del dialogo\n      model: link.longLink,\n      type: 'text' // optional\n    },\n    cancel: true,\n    persistent: true\n  }).onOk(async data => {\n    try {\n      // data = el valor del input\n      // Sobrescribimos la propiedad longLink del objeto link\n      const newLink = { ...link, longLink: data }\n      await useLink.modifiedLink(newLink);\n      successNotify('Se actualizo el link');\n    } catch (error) {\n      if (error.errors) {\n        error.errors?.forEach(item => {\n          errorNotify(item.msg);\n        });\n        return;\n      }\n      errorNotify('Error al actualizar');\n    }\n\n  })\n}\n<\/script>\n\n")),(0,r.yg)("h2",{id:"plugin-quasar-loading"},"Plugin Quasar Loading"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://quasar.dev/quasar-plugins/loading"},"Le metemos el loading de quasar a editar y eliminar"))),(0,r.yg)("p",null,"quasar.config.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"    framework: {\n      config: {},\n\n      // iconSet: 'material-icons', // Quasar icon set\n      // lang: 'en-US', // Quasar language pack\n\n      // For special cases outside of where the auto-import strategy can have an impact\n      // (like functional components as one of the examples),\n      // you can manually specify Quasar components/directives to be available everywhere:\n      //\n      // components: [],\n      // directives: [],\n\n      // Quasar plugins\n      plugins: [\n        'Dialog', 'Notify' ,  'Loading'\n      ]\n    }\n\n")),(0,r.yg)("p",null,"Url-store.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"import { defineStore } from 'pinia';\nimport { api } from 'src/boot/axios';\nimport { useUserStore } from './user-store';\nimport { ref } from 'vue';\nimport { useQuasar } from 'quasar'\nexport const useLinkStore = defineStore('Link', () => {\n  const useStore = useUserStore();\n  const $q = useQuasar()\n  const links = ref([]);\n  const createLink = async (longLink) => {\n\n    try {\n      // Mostramos el spinner de carga\n      $q.loading.show()\n      // api({configuracion})\n      const res = await api({\n        url: '/api/links/',\n        method: \"POST\",\n        headers: {\n          Authorization: \"Bearer \" + useStore.token\n        },\n        data: {\n          longLink\n        }\n      })\n      console.log(res.data);\n      links.value.push(res.data.link);\n    } catch (error) {\n\n      throw error.response?.data || error\n    } finally {\n      // Ocultamos el spinner de carga\n      $q.loading.hide()\n    }\n  }\n\n  const getLinks = async () => {\n    try {\n      // Mostramos el spinner de carga\n      $q.loading.show()\n      console.log(\"Llamando a la peticion\");\n      const res = await api({\n        url: '/api/links/',\n        method: \"GET\",\n        headers: {\n          Authorization: \"Bearer \" + useStore.token\n        }\n\n      })\n      console.log(res.data);\n      links.value = [...res.data.links]\n    } catch (error) {\n      console.log(error.response?.data || error);\n    } finally {\n      // Ocultamos el spinner de carga\n      $q.loading.hide()\n    }\n  }\n  getLinks();\n\n  const removeLink = async (_id) => {\n    try {\n      // Mostramos el spinner de carga\n      $q.loading.show()\n      await api({\n        url: `/api/links/${_id}`,\n        method: \"DELETE\",\n        headers: {\n          Authorization: \"Bearer \" + useStore.token\n        }\n      })\n      links.value = links.value.filter(item => item._id !== _id);\n    } catch (error) {\n      throw error.response?.data || error;\n    } finally {\n      // Ocultamos el spinner de carga\n      $q.loading.hide()\n    }\n  }\n\n  const modifiedLink = async (newLink) => {\n    try {\n      // Mostramos el spinner de carga\n      $q.loading.show()\n      await api({\n        url: `/api/links/${newLink._id}`,\n        method: 'PATCH',\n        headers: {\n          Authorization: \"Bearer \" + useStore.token\n        },\n        data: {\n          longLink: newLink.longLink\n        }\n      })\n      links.value = links.value.map(item => item._id === newLink._id ? newLink : item);\n      console.log('actualizado');\n    } catch (error) {\n      // Lanzamos un error\n      throw error.response?.data || error;\n    } finally {\n      // Ocultamos el spinner de carga\n      $q.loading.hide()\n    }\n  }\n  return {\n    createLink, links, removeLink, modifiedLink\n  }\n});\n\n")),(0,r.yg)("h2",{id:"funcion-copy"},"Funcion copy"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API/Clipboard"},"API Clipboard -- Para manipular el portapapeles"))),(0,r.yg)("p",null,"LinkCard.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const copyLink = async (nanoLink) => {\n  try {\n    const path = `http://localhost:9000/${nanoLink}`;\n    // Insertamos el contenido de la variable path en el portapapeles.\n    await navigator.clipboard.writeText(path)\n    successNotify("Se copio el link");\n  } catch (error) {\n    errorNotify(\'Error al copiar el link\');\n    console.log(error);\n  }\n}\n<\/script>\n<template>\n  <q-card class="my-card q-mb-sm">\n    <q-card-section>\n      <div class="text-overline">{{ link.nanoLink }}</div>\n      {{ link }}\n    </q-card-section>\n    <q-separator />\n\n    <q-card-actions>\n      \x3c!--  trash-can-outline es el nombre del icono que se encuentra en el sitio web --\x3e\n      \x3c!-- mdi-nombreicono --\x3e\n      <q-btn flat round icon="mdi-trash-can-outline" color="red" @click="deleteLink(link._id)" />\n      <q-btn flat round icon="mdi-pencil-outline" @click="updateLink(link)" />\n      <q-btn flat color="primary" @click="copyLink(link.nanoLink)">\n        Copy\n      </q-btn>\n\n')),(0,r.yg)("h2",{id:"variable-de-entorno-en-quasar"},"Variable de entorno en quasar"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://quasar.dev/quasar-cli-webpack/handling-process-env"},"Manejo de variables de entorno")),(0,r.yg)("li",{parentName:"ul"},"Se configuran en un archivo que te genera quasar")),(0,r.yg)("p",null,"quasar.config.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"      env: {\n        FRONT_URI: 'http://localhost:9000',\n        MY_API: 'http://localhost:5000'\n      },\n\n")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observacion")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Las variables de entornos se insertan en la propiedad env( al comienzo esta comentada)")))),(0,r.yg)("h4",{id:"utilizamos-las-variables-de-entorno"},"Utilizamos las variables de entorno"),(0,r.yg)("p",null,"LinkCard.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const copyLink = async (nanoLink) => {\n  try {\n    console.log(process.env.FRONT_URI);\n    const path = `${process.env.FRONT_URI}/${nanoLink}`;\n    // Insertamos el contenido de la variable path en el portapapeles.\n    await navigator.clipboard.writeText(path)\n    successNotify(\"Se copio el link\");\n  } catch (error) {\n    errorNotify('Error al copiar el link');\n    console.log(error);\n  }\n}\n<\/script>\n\n")),(0,r.yg)("p",null,"Src/boot/axios.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"import { boot } from 'quasar/wrappers'\nimport axios from 'axios'\nconst api = axios.create({\n  baseURL: process.env.MY_API,\n  // withCredentials = Que reciba cookies\n  withCredentials: true,\n\n}\n\n)\n\n")),(0,r.yg)("h3",{id:"detectar-si-esta-en-desarrollo"},"Detectar si esta en desarrollo"),(0,r.yg)("p",null,"quasar.config.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"module.exports = configure(function ( ctx ) {\n     env: {\n        // ctx.dev = Si es true , es porque estamos en modo desarollo\n        FRONT_URI: ctx.dev ? 'http://localhost:9000' : \"\",\n        MY_API: ctx.dev ? 'http://localhost:5000' : \"\"\n      },\n\n")),(0,r.yg)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("p",{parentName:"div"},"Son variables de entorno publica ya que se encuentra en el archivo de configuraci\xf3n."))),(0,r.yg)("h2",{id:"redireccionamiento"},"Redireccionamiento"),(0,r.yg)("p",null,"pages/RedirectPage.vue"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://quasar.dev/vue-components/spinners"},"componente Spinner"))),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'<template>\n <q-page class="text-center q-pt-xl">\n   <h4>Te estamos redirigiendo...</h4>\n   <q-spinner-audio color="primary" size="2em" />\n </q-page>\n</template>\n\n<script setup>\n<\/script>\n\n')),(0,r.yg)("p",null," Router/routes.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"}," const routes = [\n  {\n    path: '/',\n    component: () => import('layouts/MainLayout.vue'),\n    children: [\n      {\n        path: '', component: () => import('pages/IndexPage.vue'), meta: {\n          auth: true\n        }\n      },\n      {\n        path: 'protected', component: () => import('pages/ProtectedPage.vue'),\n        meta: {\n          auth: true\n        }\n      },\n      { path: 'login', component: () => import('pages/LoginPage.vue') },\n      { path: 'register', component: () => import('pages/RegisterPage.vue') },\n      // path = /:nombrevariable\n      // Ej. http://localhost:9000/fdghfdhdf\n      // nombrevariable = fdghfdhdf\n      { path: '/:nanoid', component: () => import('pages/RedirectPage.vue') },\n    ]\n  },\n\n  // Always leave this as last one,\n  // but you can also remove it\n  {\n    path: '/:catchAll(.*)*',\n    component: () => import('pages/ErrorNotFound.vue')\n  }\n]\n\n")),(0,r.yg)("h3",{id:"metodo-beforeenter"},"Metodo beforeEnter"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Sirve para activar un m\xe9todo antes de que entre a la ruta (al componente)"),(0,r.yg)("li",{parentName:"ul"},"El metodo se ejecutara antes de renderizar el componente."),(0,r.yg)("li",{parentName:"ul"},"sintaxis: beforeEnter:m\xe9todo")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"import { api } from 'src/boot/axios';\n\nconst redirectLink = async (to, from, next) => {\n  // Parecido a express\n  // to = req   from =  res     next  = Cumple la misma funcion , que ejecute/renderize lo siguiente\n  // to.params =  Es un objeto con todas las variables de la url(params)\n  // console.log(to.params);\n  try {\n    const { data } = await api.get(`/api/links/${to.params.nanoid}`);\n    console.log(data.longLink);\n    //Redirecciono\n    next();\n    window.location.href = data.longLink;\n\n  } catch (error) {\n    console.log(error);\n    // Redirecciono\n    next('/404');\n  }\n}\nconst routes = [\n  {\n    path: '/',\n    component: () => import('layouts/MainLayout.vue'),\n    children: [\n      {\n        path: '', component: () => import('pages/IndexPage.vue'), meta: {\n          auth: true\n        }\n      },\n      {\n        path: 'protected', component: () => import('pages/ProtectedPage.vue'),\n        meta: {\n          auth: true\n        }\n      },\n      { path: 'login', component: () => import('pages/LoginPage.vue') },\n      { path: 'register', component: () => import('pages/RegisterPage.vue') },\n      // path = /:nombrevariable\n      // Ej. http://localhost:9000/fdghfdhdf\n      // nombrevariable = fdghfdhdf\n      {\n        path: '/:nanoid', component: () => import('pages/RedirectPage.vue'),\n        beforeEnter: redirectLink\n      },\n    ]\n  },\n  {\n    path: '/404',\n    component: () => import('pages/ErrorNotFound.vue')\n  },\n\n  // Always leave this as last one,\n  // but you can also remove it\n  {\n    path: '/:catchAll(.*)*',\n    component: () => import('pages/ErrorNotFound.vue')\n  }\n]\n\nexport default routes\n\n")),(0,r.yg)("h2",{id:"reset-validation"},"Reset Validation"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://quasar.dev/vue-components/form"},"ResetValidation")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://quasar.dev/vue-components/input"},"ResetValidation con lazy-rules"))),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"lazy-rules")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("p",{parentName:"div"},"Si usa la props  lazy-rules (en el input , sin ning\xfan valor), la validaci\xf3n comienza despu\xe9s del primer desenfoque. "))),(0,r.yg)("p",null,"AddLink.vue"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'<script setup>\nimport { useLinkStore } from \'src/stores/url-store\';\n\nimport { ref } from \'vue\';\nimport { useNotify } from \'../composables/notifyHook\'\nconst link = ref(\'\');\nconst loading = ref(false);\nconst formAdd = ref(null);\n\nconst useLink = useLinkStore()\nconst { showNotify } = useNotify();\nconst addLink = async () => {\n  console.log(link.value);\n  try {\n    loading.value = true;\n    await useLink.createLink(link.value);\n    showNotify(\'Link agregado con exito\', \'green\');\n    console.log(formAdd.value);\n    formAdd.value.reset();\n    formAdd.value.resetValidation();\n    link.value = null;\n  } catch (error) {\n    console.log(error);\n    if (error.errors) {\n      error.errors?.forEach(item => {\n        showNotify(item.msg);\n      });\n      return;\n    }\n    // Creamos un dialogo\n    showNotify(\'Error al agregar\');\n  } finally {\n    loading.value = false;\n  }\n\n}\n\n<\/script>\n\n<template>\n  <q-form ref="formAdd" @submit.prevent="addLink">\n\n    <q-input v-model="link" label="Ingrese link aqui" placeholder="Ingrese su super link" :rules="[\n      val => val && val.trim() !== \'\' || \'Escribe algo por favor\'\n    ]" lazy-rules></q-input>\n    <q-btn class="q-mt-sm full-width" label="Agregar" color="primary" type="submit" :loading="loading"></q-btn>\n  </q-form>\n\n</template>\n\n')),(0,r.yg)("h2",{id:"producci\xf3n"},"Producci\xf3n"),(0,r.yg)("h3",{id:"backend"},"Backend"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://railway.app/"},"Railway")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://render.com/"},"Render")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://www.heroku.com/"},"Heroku"))),(0,r.yg)("h3",{id:"frontend"},"Frontend"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://www.netlify.com/"},"Netlify")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://firebase.google.com/"},"Firebase"))),(0,r.yg)("h3",{id:"deploy-backend"},"Deploy backend"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://fedeleva.github.io/documentacion/docs/Node/apiRest#deploy-heroku"},"Guia de deploy usando heroku y render"))),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Recordatorio ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Configurar la variable de entorno "),(0,r.yg)("li",{parentName:"ul"},"ORIGIN1 = url en la que se realizo el deploy del frontend")))),(0,r.yg)("h3",{id:"deploy-frontend"},"Deploy Frontend"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"En la carpeta del proyecto , usamos el comando:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-powershell"},"quasar build\n")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observacion ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Lo compila como una SPA"),(0,r.yg)("li",{parentName:"ul"},"Si el comando funciono , deber\xeda tener una carpeta llamada dist y dentro una llamada spa."),(0,r.yg)("li",{parentName:"ul"},"El contenido de la carpeta spa se deber\xeda subir al hosting. (tiene archivos est\xe1ticos)")))),(0,r.yg)("h4",{id:"vamos-a-usar-netlify"},"Vamos a usar Netlify"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Arrastramos la carpeta spa a Netlify para hacer un deploy manual.")),(0,r.yg)("h3",{id:"error-de-vue-router-y-configuramos-las-variables-de-entorno"},"Error de Vue Router y Configuramos las variables de entorno"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://stackoverflow.com/questions/56468161/netlify-does-not-recognize-the-url-params-when-using-react-router-dom"},"link")),(0,r.yg)("li",{parentName:"ul"},"Al usar vue router para redireccionar o acceder a alguna url, se lanzar\xeda un error \u201cPage Not Found\u201d")),(0,r.yg)("h4",{id:"solucion"},"Solucion:"),(0,r.yg)("p",null,"Crea un  archivo _redirects en public con:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"/* /index.html 200\n")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Explicacion ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"Todas las peticiones cuya respuesta sea 200, se van a redireccionar al index.html")))),(0,r.yg)("h4",{id:"configuramos-las-variables-de-entorno"},"Configuramos las variables de entorno"),(0,r.yg)("p",null,"Quasar.config.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"      env: {\n        // ctx.dev = Si es true , es porque estamos en modo desarollo\n        FRONT_URI: ctx.dev ? 'http://localhost:9000' : \"https://stellular-otter-f7743b.netlify.app\",\n        MY_API: ctx.dev ? 'http://localhost:5000' : \"XXX\"\n      },\n\n")),(0,r.yg)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.yg)("div",{parentName:"div",className:"admonition-heading"},(0,r.yg)("h5",{parentName:"div"},(0,r.yg)("span",{parentName:"h5",className:"admonition-icon"},(0,r.yg)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.yg)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Observacion ")),(0,r.yg)("div",{parentName:"div",className:"admonition-content"},(0,r.yg)("ul",{parentName:"div"},(0,r.yg)("li",{parentName:"ul"},"XXX = el dominio en donde este alojada la api")))),(0,r.yg)("h4",{id:"luego-de-solucionar-el-problema-y-configurar-el-quasarconfig--volvemos-a-hacer-el-deploy"},"Luego de solucionar el problema y configurar el quasar.config , volvemos a hacer el deploy"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-powershell"},"Quasar build\nEn el apartado de deploy de Netlify, vuelve a arrastrar la carpeta SPA.\n")),(0,r.yg)("h3",{id:"error-persistencia-de-datos"},"Error persistencia de datos"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"No se guardan las cookies que devuelve el servidor."),(0,r.yg)("li",{parentName:"ul"},"Hay que configurar las cookies en el backend para que funcionen en dominios de terceros.")),(0,r.yg)("p",null,"En el backend:"),(0,r.yg)("p",null,"Utils/tokenManager.js"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'export const generateRefreshToken = (uid , res) => {\n    // 30 dias  en segundos\n    const expiresIn = 60 * 60 * 24 * 30;\n    try {\n        const refreshToken = jwt.sign({ uid }, process.env.JWT_REFRESH, {expiresIn});\n        res.cookie("refreshToken", refreshToken, {\n            httpOnly: true,\n            secure: !(process.env.MODO === "developer"),\n            // La expiracion de la cookie : recibe el tiempo en milisegundos\n            expires: new Date(Date.now() + expiresIn * 1000) ,\n            sameSite: "none",\n        })\n\n    } catch (error) {\n         console.log(error);\n    }\n}\n\n')),(0,r.yg)("h4",{id:"luego-de-solucionar-el-problema-y-configurar-el-quasarconfig--volvemos-a-hacer-el-deploy-1"},"Luego de solucionar el problema y configurar el quasar.config , volvemos a hacer el deploy"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-powershell"},"Quasar build\nEn el apartado de deploy de Netlify, vuelve a arrastrar la carpeta SPA.\n")))}d.isMDXComponent=!0}}]);